
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Reactjs Basic Notes Â· Awesome Notes</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="sabertazimi">
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-disqus/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-theme-comscore/test.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="reactRouterBasicNotes.html" />
    
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"user":"sabertazimi","repo":"awesome-notes","type":"star","size":"small","count":true}]};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://github.com/sabertazimi/awesome-notes" target="_blank" class="custom-link">Awesome Notes</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Computer Science
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" >
            
                <span>
            
                    
                    Algorithms
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../../../computerScience/algorithms/algorithmsBasicNotes.html">
            
                <a href="../../../computerScience/algorithms/algorithmsBasicNotes.html">
            
                    
                    Algorithms Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../../../computerScience/algorithms/ojBasicNotes.html">
            
                <a href="../../../computerScience/algorithms/ojBasicNotes.html">
            
                    
                    Oj Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" >
            
                <span>
            
                    
                    Architecture
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../../../computerScience/architecture/archBasicNotes.html">
            
                <a href="../../../computerScience/architecture/archBasicNotes.html">
            
                    
                    Arch Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" >
            
                <span>
            
                    
                    Compilers
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../../../computerScience/compilers/compilersBasicNotes.html">
            
                <a href="../../../computerScience/compilers/compilersBasicNotes.html">
            
                    
                    Compilers Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" >
            
                <span>
            
                    
                    Data Base
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../../../computerScience/dataBase/databaseBasicNotes.html">
            
                <a href="../../../computerScience/dataBase/databaseBasicNotes.html">
            
                    
                    Database Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" >
            
                <span>
            
                    
                    Network
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="../../../computerScience/network/networkBasicNotes.html">
            
                <a href="../../../computerScience/network/networkBasicNotes.html">
            
                    
                    Network Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.6" >
            
                <span>
            
                    
                    Operating Systems
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.6.1" data-path="../../../computerScience/operatingSystems/CSAPP.html">
            
                <a href="../../../computerScience/operatingSystems/CSAPP.html">
            
                    
                    CSAPP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.2" data-path="../../../computerScience/operatingSystems/memoryManagementBasicNotes.html">
            
                <a href="../../../computerScience/operatingSystems/memoryManagementBasicNotes.html">
            
                    
                    Memory Management Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.3" data-path="../../../computerScience/operatingSystems/operatingSystemsBasicNotes.html">
            
                <a href="../../../computerScience/operatingSystems/operatingSystemsBasicNotes.html">
            
                    
                    Operating Systems Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.7" >
            
                <span>
            
                    
                    Software Testing
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.7.1" data-path="../../../computerScience/softwareTesting/softwareTestingBasicNotes.html">
            
                <a href="../../../computerScience/softwareTesting/softwareTestingBasicNotes.html">
            
                    
                    Software Testing Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.8" >
            
                <span>
            
                    
                    Virtualization
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.8.1" data-path="../../../computerScience/virtualization/virtBasicNotes.html">
            
                <a href="../../../computerScience/virtualization/virtBasicNotes.html">
            
                    
                    Virt Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Language
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" >
            
                <span>
            
                    
                    Assembly
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../../../language/assembly/AssemblyBasic.html">
            
                <a href="../../../language/assembly/AssemblyBasic.html">
            
                    
                    Assembly Basic
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" >
            
                <span>
            
                    
                    C
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" >
            
                <span>
            
                    
                    Tools
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1.1" data-path="../../../language/c/tools/awesomeTools.html">
            
                <a href="../../../language/c/tools/awesomeTools.html">
            
                    
                    Awesome Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.1.2" data-path="../../../language/c/tools/gdbTutorial.html">
            
                <a href="../../../language/c/tools/gdbTutorial.html">
            
                    
                    Gdb Tutorial
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../../../language/c/cBasicNotes.html">
            
                <a href="../../../language/c/cBasicNotes.html">
            
                    
                    C Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../../../language/c/namingConventions.html">
            
                <a href="../../../language/c/namingConventions.html">
            
                    
                    Naming Conventions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.4" data-path="../../../language/c/standardLibrary.html">
            
                <a href="../../../language/c/standardLibrary.html">
            
                    
                    Standard Library
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" >
            
                <span>
            
                    
                    Cpp
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../../../language/cpp/cppBasicNotes.html">
            
                <a href="../../../language/cpp/cppBasicNotes.html">
            
                    
                    Cpp Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" >
            
                <span>
            
                    
                    Go
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="../../../language/go/goBasicNotes.html">
            
                <a href="../../../language/go/goBasicNotes.html">
            
                    
                    Go Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.5" >
            
                <span>
            
                    
                    Haskell
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../../../language/haskell/haskellBasicNotes.html">
            
                <a href="../../../language/haskell/haskellBasicNotes.html">
            
                    
                    Haskell Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6" >
            
                <span>
            
                    
                    Java
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.1" data-path="../../../language/java/javaBasicNotes.html">
            
                <a href="../../../language/java/javaBasicNotes.html">
            
                    
                    Java Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.2" data-path="../../../language/java/javaNamingConventions.html">
            
                <a href="../../../language/java/javaNamingConventions.html">
            
                    
                    Java Naming Conventions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.7" >
            
                <span>
            
                    
                    Python
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.7.1" data-path="../../../language/python/pythonBasicNotes.html">
            
                <a href="../../../language/python/pythonBasicNotes.html">
            
                    
                    Python Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.8" >
            
                <span>
            
                    
                    Verilog
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.8.1" data-path="../../../language/verilog/verilogBasicNotes.html">
            
                <a href="../../../language/verilog/verilogBasicNotes.html">
            
                    
                    Verilog Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Programming
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" >
            
                <span>
            
                    
                    Android
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../../android/androidBasicNotes.html">
            
                <a href="../../android/androidBasicNotes.html">
            
                    
                    Android Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" >
            
                <span>
            
                    
                    Code Guide
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../../codeGuide/bugGuideBasicNotes.html">
            
                <a href="../../codeGuide/bugGuideBasicNotes.html">
            
                    
                    Bug Guide Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../../codeGuide/cleanCodeBasicNotes.html">
            
                <a href="../../codeGuide/cleanCodeBasicNotes.html">
            
                    
                    Clean Code Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="../../codeGuide/codeReviewBasicNotes.html">
            
                <a href="../../codeGuide/codeReviewBasicNotes.html">
            
                    
                    Code Review Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" >
            
                <span>
            
                    
                    Functional Programming
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="../../functionalProgramming/functionalProgrammingBasicNotes.html">
            
                <a href="../../functionalProgramming/functionalProgrammingBasicNotes.html">
            
                    
                    Functional Programming Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.4" >
            
                <span>
            
                    
                    Game
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.1" data-path="../../game/gameDesignBasicNotes.html">
            
                <a href="../../game/gameDesignBasicNotes.html">
            
                    
                    Game Design Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.5" >
            
                <span>
            
                    
                    Linux
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.5.1" data-path="../../linux/setUp/setUp.html">
            
                <a href="../../linux/setUp/setUp.html">
            
                    
                    Set Up
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.2" data-path="../../linux/linuxBasicNotes.html">
            
                <a href="../../linux/linuxBasicNotes.html">
            
                    
                    Linux Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.6" >
            
                <span>
            
                    
                    Tools
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.6.1" >
            
                <span>
            
                    
                    Build Tools
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.6.1.1" data-path="../../tools/buildTools/CmakeBasicNotes.html">
            
                <a href="../../tools/buildTools/CmakeBasicNotes.html">
            
                    
                    Cmake Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6.1.2" data-path="../../tools/buildTools/makefileBasicNotes.html">
            
                <a href="../../tools/buildTools/makefileBasicNotes.html">
            
                    
                    Makefile Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.6.2" >
            
                <span>
            
                    
                    Git
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.6.2.1" data-path="../../tools/git/gitBasicNotes.html">
            
                <a href="../../tools/git/gitBasicNotes.html">
            
                    
                    Git Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.6.3" >
            
                <span>
            
                    
                    Vim
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.6.3.1" data-path="../../tools/vim/vimBasicNotes.html">
            
                <a href="../../tools/vim/vimBasicNotes.html">
            
                    
                    Vim Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.7" >
            
                <span>
            
                    
                    Web
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.7.1" >
            
                <span>
            
                    
                    Angular
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.7.1.1" data-path="../angular/angularBasicNotes.html">
            
                <a href="../angular/angularBasicNotes.html">
            
                    
                    Angular Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.7.2" >
            
                <span>
            
                    
                    Css
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.7.2.1" data-path="../css/bootstrapBasicNotes.html">
            
                <a href="../css/bootstrapBasicNotes.html">
            
                    
                    Bootstrap Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.2.2" data-path="../css/cssAdvancedNotes.html">
            
                <a href="../css/cssAdvancedNotes.html">
            
                    
                    Css Advanced Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.2.3" data-path="../css/cssBasicNotes.html">
            
                <a href="../css/cssBasicNotes.html">
            
                    
                    Css Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.2.4" data-path="../css/sassBasicNotes.html">
            
                <a href="../css/sassBasicNotes.html">
            
                    
                    Sass Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.2.5" data-path="../css/sassOfficalReference.html">
            
                <a href="../css/sassOfficalReference.html">
            
                    
                    Sass Offical Reference
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.7.3" >
            
                <span>
            
                    
                    Frameworks
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.7.3.1" data-path="../frameworks/electronBasicNotes.html">
            
                <a href="../frameworks/electronBasicNotes.html">
            
                    
                    Electron Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.3.2" data-path="../frameworks/jQueryBasicNotes.html">
            
                <a href="../frameworks/jQueryBasicNotes.html">
            
                    
                    J Query Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.7.4" >
            
                <span>
            
                    
                    Html
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.7.4.1" data-path="../html/htmlBasicNotes.html">
            
                <a href="../html/htmlBasicNotes.html">
            
                    
                    Html Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.7.5" >
            
                <span>
            
                    
                    Javascript
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.7.5.1" data-path="../javascript/javascriptAdvancedNotes.html">
            
                <a href="../javascript/javascriptAdvancedNotes.html">
            
                    
                    Javascript Advanced Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.5.2" data-path="../javascript/javascriptBasicNotes.html">
            
                <a href="../javascript/javascriptBasicNotes.html">
            
                    
                    Javascript Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.5.3" data-path="../javascript/javascriptPatternsNotes.html">
            
                <a href="../javascript/javascriptPatternsNotes.html">
            
                    
                    Javascript Patterns Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.5.4" data-path="../javascript/typescriptBasicNotes.html">
            
                <a href="../javascript/typescriptBasicNotes.html">
            
                    
                    Typescript Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.7.6" >
            
                <span>
            
                    
                    Nodejs
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.7.6.1" data-path="../nodejs/expressBasicNotes.html">
            
                <a href="../nodejs/expressBasicNotes.html">
            
                    
                    Express Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.6.2" data-path="../nodejs/graphqlBasicNotes.html">
            
                <a href="../nodejs/graphqlBasicNotes.html">
            
                    
                    Graphql Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.6.3" data-path="../nodejs/nodejsBasicNotes.html">
            
                <a href="../nodejs/nodejsBasicNotes.html">
            
                    
                    Nodejs Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.7.7" >
            
                <span>
            
                    
                    Reactjs
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.4.7.7.1" data-path="reactjsBasicNotes.html">
            
                <a href="reactjsBasicNotes.html">
            
                    
                    Reactjs Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.7.2" data-path="reactRouterBasicNotes.html">
            
                <a href="reactRouterBasicNotes.html">
            
                    
                    React Router Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.7.3" data-path="reduxBasicNotes.html">
            
                <a href="reduxBasicNotes.html">
            
                    
                    Redux Basic Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.7.4" data-path="webpackBasicNotes.html">
            
                <a href="webpackBasicNotes.html">
            
                    
                    Webpack Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.7.8" >
            
                <span>
            
                    
                    Security
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.7.8.1" data-path="../security/securityBasicNotes.html">
            
                <a href="../security/securityBasicNotes.html">
            
                    
                    Security Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.7.9" >
            
                <span>
            
                    
                    Vuejs
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.7.9.1" data-path="../vuejs/vueBasicNotes.html">
            
                <a href="../vuejs/vueBasicNotes.html">
            
                    
                    Vue Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.7.10" data-path="../libraryBasicNotes.html">
            
                <a href="../libraryBasicNotes.html">
            
                    
                    Library Basic Notes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../../device.html">
            
                <a href="../../../device.html">
            
                    
                    Device
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../../starRepos.html">
            
                <a href="../../../starRepos.html">
            
                    
                    Star Repos
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >Reactjs Basic Notes</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#react-basic-notes"><b> </b>React Basic Notes</a></li><ul><li><span class="title-icon "></span><a href="#diff-algorithm-reconciliation"><b>1. </b>Diff Algorithm (Reconciliation)</a></li><ul><li><span class="title-icon "></span><a href="#react-fiber"><b>1.1. </b>React Fiber</a></li><li><span class="title-icon "></span><a href="#elements-of-different-types"><b>1.2. </b>Elements of Different Types</a></li><li><span class="title-icon "></span><a href="#dom-elements-of-same-type"><b>1.3. </b>DOM Elements of Same Type</a></li><li><span class="title-icon "></span><a href="#component-elements-of-same-type"><b>1.4. </b>Component Elements of Same Type</a></li></ul><li><span class="title-icon "></span><a href="#props-and-state"><b>2. </b>Props and State</a></li><ul><li><span class="title-icon "></span><a href="#setstate"><b>2.1. </b>setState</a></li><li><span class="title-icon "></span><a href="#componentdidmount"><b>2.2. </b>componentDidMount()</a></li><li><span class="title-icon "></span><a href="#props-validation"><b>2.3. </b>Props Validation</a></li></ul><li><span class="title-icon "></span><a href="#element-and-component"><b>3. </b>Element and Component</a></li><ul><li><span class="title-icon "></span><a href="#jsx"><b>3.1. </b>JSX</a></li><li><span class="title-icon "></span><a href="#functionalclass-component"><b>3.2. </b>functional/class component</a></li><li><span class="title-icon "></span><a href="#statefulstateless-component"><b>3.3. </b>stateful/stateless component</a></li><li><span class="title-icon "></span><a href="#component-lifecycle"><b>3.4. </b>Component Lifecycle</a></li><li><span class="title-icon "></span><a href="#refs"><b>3.5. </b>Refs</a></li><li><span class="title-icon "></span><a href="#hoc-higher-order-components"><b>3.6. </b>HOC (Higher-Order Components)</a></li><li><span class="title-icon "></span><a href="#render-props-children-as-function"><b>3.7. </b>Render Props (Children as Function)</a></li></ul><li><span class="title-icon "></span><a href="#hooks"><b>4. </b>Hooks</a></li><ul><li><span class="title-icon "></span><a href="#default-hooks"><b>4.1. </b>Default Hooks</a></li><li><span class="title-icon "></span><a href="#basic-rules"><b>4.2. </b>Basic Rules</a></li><li><span class="title-icon "></span><a href="#hooks-internel"><b>4.3. </b>Hooks Internel</a></li><li><span class="title-icon "></span><a href="#custom-hooks"><b>4.4. </b>Custom Hooks</a></li></ul><li><span class="title-icon "></span><a href="#es6-syntax"><b>5. </b>ES6 Syntax</a></li><ul><li><span class="title-icon "></span><a href="#comments"><b>5.1. </b>Comments</a></li><li><span class="title-icon "></span><a href="#binding-for-this"><b>5.2. </b>binding for this</a></li></ul><li><span class="title-icon "></span><a href="#react-style-guide"><b>6. </b>React Style Guide</a></li><ul><li><span class="title-icon "></span><a href="#naming-style"><b>6.1. </b>Naming Style</a></li><li><span class="title-icon "></span><a href="#props-style"><b>6.2. </b>Props Style</a></li><li><span class="title-icon "></span><a href="#refs-style"><b>6.3. </b>Refs Style</a></li><li><span class="title-icon "></span><a href="#alignment-style"><b>6.4. </b>Alignment Style</a></li><li><span class="title-icon "></span><a href="#quotes-style"><b>6.5. </b>Quotes Style</a></li><li><span class="title-icon "></span><a href="#spacing-style"><b>6.6. </b>Spacing Style</a></li><li><span class="title-icon "></span><a href="#ordering-of-class-component"><b>6.7. </b>Ordering of Class Component</a></li></ul><li><span class="title-icon "></span><a href="#mvcmvvm"><b>7. </b>MVC/MVVM</a></li><ul><li><span class="title-icon "></span><a href="#controller"><b>7.1. </b>Controller</a></li><li><span class="title-icon "></span><a href="#comparsion"><b>7.2. </b>Comparsion</a></li><li><span class="title-icon "></span><a href="#best-practice"><b>7.3. </b>Best Practice</a></li></ul><li><span class="title-icon "></span><a href="#modern-react"><b>8. </b>Modern React</a></li><ul><li><span class="title-icon "></span><a href="#lazy-and-suspense"><b>8.1. </b>Lazy and Suspense</a></li><li><span class="title-icon "></span><a href="#context-api"><b>8.2. </b>Context API</a></li><li><span class="title-icon "></span><a href="#error-boundary"><b>8.3. </b>Error Boundary</a></li><li><span class="title-icon "></span><a href="#reactfragmentarray-components"><b>8.4. </b>React.Fragment/Array Components</a></li></ul><li><span class="title-icon "></span><a href="#portals"><b>9. </b>Portals</a></li><li><span class="title-icon "></span><a href="#react-performance"><b>10. </b>React Performance</a></li><ul><li><span class="title-icon "></span><a href="#rerendering-problem"><b>10.1. </b>Rerendering Problem</a></li><li><span class="title-icon "></span><a href="#code-spliting"><b>10.2. </b>Code Spliting</a></li></ul><li><span class="title-icon "></span><a href="#server-side-rendering"><b>11. </b>Server Side Rendering</a></li><ul><li><span class="title-icon "></span><a href="#pros-of-ssr"><b>11.1. </b>Pros of SSR</a></li><li><span class="title-icon "></span><a href="#basic-example"><b>11.2. </b>Basic Example</a></li><li><span class="title-icon "></span><a href="#internationalization"><b>11.3. </b>Internationalization</a></li></ul><li><span class="title-icon "></span><a href="#testing"><b>12. </b>Testing</a></li><ul><li><span class="title-icon "></span><a href="#shallow-renderer"><b>12.1. </b>Shallow Renderer</a></li><li><span class="title-icon "></span><a href="#test-renderer"><b>12.2. </b>Test Renderer</a></li><li><span class="title-icon "></span><a href="#enzyme"><b>12.3. </b>Enzyme</a></li></ul><li><span class="title-icon "></span><a href="#create-react-app"><b>13. </b>Create React App</a></li><ul><li><span class="title-icon "></span><a href="#react-scripts"><b>13.1. </b>React Scripts</a></li><li><span class="title-icon "></span><a href="#deployment"><b>13.2. </b>Deployment</a></li></ul><li><span class="title-icon "></span><a href="#styled-component"><b>14. </b>Styled Component</a></li><ul><li><span class="title-icon "></span><a href="#basic-usage"><b>14.1. </b>Basic Usage</a></li></ul><li><span class="title-icon "></span><a href="#interviews"><b>15. </b>Interviews</a></li></ul></ul></div><a href="#react-basic-notes" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="react-basic-notes"><a name="react-basic-notes" class="anchor-navigation-ex-anchor" href="#react-basic-notes"><i class="fa fa-link" aria-hidden="true"></i></a> React Basic Notes</h1>
<!-- TOC -->
<ul>
<li><a href="#react-basic-notes">React Basic Notes</a><ul>
<li><a href="#diff-algorithm-reconciliation">Diff Algorithm (Reconciliation)</a><ul>
<li><a href="#react-fiber">React Fiber</a></li>
<li><a href="#elements-of-different-types">Elements of Different Types</a></li>
<li><a href="#dom-elements-of-same-type">DOM Elements of Same Type</a></li>
<li><a href="#component-elements-of-same-type">Component Elements of Same Type</a></li>
</ul>
</li>
<li><a href="#props-and-state">Props and State</a><ul>
<li><a href="#setstate">setState</a></li>
<li><a href="#componentdidmount">componentDidMount()</a></li>
<li><a href="#props-validation">Props Validation</a></li>
</ul>
</li>
<li><a href="#element-and-component">Element and Component</a><ul>
<li><a href="#jsx">JSX</a></li>
<li><a href="#functionalclass-component">functional/class component</a></li>
<li><a href="#statefulstateless-component">stateful/stateless component</a><ul>
<li><a href="#stateless-component">stateless component</a></li>
<li><a href="#stateful-component">stateful component</a></li>
</ul>
</li>
<li><a href="#component-lifecycle">Component Lifecycle</a><ul>
<li><a href="#creationmounting">Creation/Mounting</a></li>
<li><a href="#updating">Updating</a></li>
<li><a href="#unmounting">Unmounting</a></li>
</ul>
</li>
<li><a href="#refs">Refs</a><ul>
<li><a href="#forward-refs">Forward Refs</a></li>
<li><a href="#callback-refs">Callback Refs</a></li>
</ul>
</li>
<li><a href="#hoc-higher-order-components">HOC (Higher-Order Components)</a></li>
<li><a href="#render-props-children-as-function">Render Props (Children as Function)</a></li>
</ul>
</li>
<li><a href="#hooks">Hooks</a><ul>
<li><a href="#default-hooks">Default Hooks</a><ul>
<li><a href="#usememo">useMemo</a></li>
<li><a href="#usecallback">useCallback</a></li>
<li><a href="#usestate">useState</a></li>
<li><a href="#useref">useRef</a></li>
<li><a href="#useeffect">useEffect</a></li>
</ul>
</li>
<li><a href="#basic-rules">Basic Rules</a></li>
<li><a href="#hooks-internel">Hooks Internel</a></li>
<li><a href="#custom-hooks">Custom Hooks</a><ul>
<li><a href="#lifecycle-hooks">LifeCycle Hooks</a></li>
<li><a href="#async-data-hook">Async Data Hook</a></li>
<li><a href="#reducer-hook">Reducer Hook</a></li>
<li><a href="#previous-hook">Previous Hook</a></li>
<li><a href="#store-hook">Store Hook</a></li>
<li><a href="#history-hook">History Hook</a></li>
<li><a href="#debounce-hook">Debounce Hook</a></li>
<li><a href="#context-hook">Context Hook</a></li>
<li><a href="#router-hook">Router Hook</a></li>
<li><a href="#script-loading-hook">Script Loading Hook</a></li>
<li><a href="#form-hook">Form Hook</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#es6-syntax">ES6 Syntax</a><ul>
<li><a href="#comments">Comments</a></li>
<li><a href="#binding-for-this">binding for this</a></li>
</ul>
</li>
<li><a href="#react-style-guide">React Style Guide</a><ul>
<li><a href="#naming-style">Naming Style</a></li>
<li><a href="#props-style">Props Style</a></li>
<li><a href="#refs-style">Refs Style</a></li>
<li><a href="#alignment-style">Alignment Style</a></li>
<li><a href="#quotes-style">Quotes Style</a></li>
<li><a href="#spacing-style">Spacing Style</a></li>
<li><a href="#ordering-of-class-component">Ordering of Class Component</a></li>
</ul>
</li>
<li><a href="#mvcmvvm">MVC/MVVM</a><ul>
<li><a href="#controller">Controller</a></li>
<li><a href="#comparsion">Comparsion</a></li>
<li><a href="#best-practice">Best Practice</a></li>
</ul>
</li>
<li><a href="#modern-react">Modern React</a><ul>
<li><a href="#lazy-and-suspense">Lazy and Suspense</a></li>
<li><a href="#context-api">Context API</a><ul>
<li><a href="#ref-with-context">Ref with Context</a></li>
</ul>
</li>
<li><a href="#error-boundary">Error Boundary</a></li>
<li><a href="#reactfragmentarray-components"><code>React.Fragment</code>/<code>Array Components</code></a></li>
</ul>
</li>
<li><a href="#portals">Portals</a></li>
<li><a href="#react-performance">React Performance</a><ul>
<li><a href="#rerendering-problem">Rerendering Problem</a></li>
<li><a href="#code-spliting">Code Spliting</a></li>
</ul>
</li>
<li><a href="#server-side-rendering">Server Side Rendering</a><ul>
<li><a href="#pros-of-ssr">Pros of SSR</a><ul>
<li><a href="#performance">Performance</a></li>
<li><a href="#seo">SEO</a></li>
<li><a href="#awesome-library">Awesome Library</a></li>
</ul>
</li>
<li><a href="#basic-example">Basic Example</a></li>
<li><a href="#internationalization">Internationalization</a><ul>
<li><a href="#simple-intl">Simple Intl</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#testing">Testing</a><ul>
<li><a href="#shallow-renderer">Shallow Renderer</a></li>
<li><a href="#test-renderer">Test Renderer</a></li>
<li><a href="#enzyme">Enzyme</a></li>
</ul>
</li>
<li><a href="#create-react-app">Create React App</a><ul>
<li><a href="#react-scripts">React Scripts</a></li>
<li><a href="#deployment">Deployment</a></li>
</ul>
</li>
<li><a href="#styled-component">Styled Component</a><ul>
<li><a href="#basic-usage">Basic Usage</a><ul>
<li><a href="#shared-css-styles">Shared CSS Styles</a></li>
<li><a href="#extend-styled-component">Extend Styled Component</a></li>
<li><a href="#props-for-styled-component">Props for Styled Component</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#interviews">Interviews</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h2 id="diff-algorithm-reconciliation"><a name="diff-algorithm-reconciliation" class="anchor-navigation-ex-anchor" href="#diff-algorithm-reconciliation"><i class="fa fa-link" aria-hidden="true"></i></a>1. Diff Algorithm (Reconciliation)</h2>
<h3 id="react-fiber"><a name="react-fiber" class="anchor-navigation-ex-anchor" href="#react-fiber"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. React Fiber</h3>
<ul>
<li><a href="https://github.com/sabertazimi/meactjs" target="_blank">A Simple React with Fiber Reconciliation</a></li>
</ul>
<p>React Fiber &#x7684;&#x76EE;&#x6807;&#x662F;&#x63D0;&#x9AD8;&#x5176;&#x5728;&#x52A8;&#x753B;&#x3001;&#x5E03;&#x5C40;&#x548C;&#x624B;&#x52BF;&#x7B49;&#x9886;&#x57DF;&#x7684;&#x9002;&#x7528;&#x6027;.
&#x5B83;&#x7684;&#x4E3B;&#x8981;&#x7279;&#x6027;&#x662F; incremental rendering: &#x5C06;&#x6E32;&#x67D3;&#x4EFB;&#x52A1;&#x62C6;&#x5206;&#x4E3A;&#x5C0F;&#x7684;&#x4EFB;&#x52A1;&#x5757;&#x5E76;&#x5C06;&#x4EFB;&#x52A1;&#x5206;&#x914D;&#x5230;&#x591A;&#x4E2A;&#x5E27;&#x4E0A;&#x7684;&#x80FD;&#x529B;.</p>
<h3 id="elements-of-different-types"><a name="elements-of-different-types" class="anchor-navigation-ex-anchor" href="#elements-of-different-types"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. Elements of Different Types</h3>
<ul>
<li>rebuild element and children</li>
<li>methods: componentDidMount/componentWillUnmount</li>
</ul>
<h3 id="dom-elements-of-same-type"><a name="dom-elements-of-same-type" class="anchor-navigation-ex-anchor" href="#dom-elements-of-same-type"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. DOM Elements of Same Type</h3>
<ul>
<li>only update the changed attributes</li>
<li>use <code>key</code> attribute to match children</li>
</ul>
<p><code>Best Practice</code>: give <code>key</code> to <code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tc</span><span class="token punctuation">&gt;</span></span></code> elements
(stable, predictable, unique and not array indexed)</p>
<h3 id="component-elements-of-same-type"><a name="component-elements-of-same-type" class="anchor-navigation-ex-anchor" href="#component-elements-of-same-type"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. Component Elements of Same Type</h3>
<ul>
<li>update the props to match the new element</li>
<li>methods: componentWillRecevieProps/componentWillUpdate</li>
<li>then <code>render</code> called, diff algorithm recurses on the old result and the new result</li>
</ul>
<h2 id="props-and-state"><a name="props-and-state" class="anchor-navigation-ex-anchor" href="#props-and-state"><i class="fa fa-link" aria-hidden="true"></i></a>2. Props and State</h2>
<h3 id="setstate"><a name="setstate" class="anchor-navigation-ex-anchor" href="#setstate"><i class="fa fa-link" aria-hidden="true"></i></a>2.1. setState</h3>
<p>&#x5728;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x51FD;&#x6570;&#x4E2D;&#x7684; setState &#x662F;&#x5F02;&#x6B65;&#x6267;&#x884C;&#x7684;,
&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x5B50;&#x7EC4;&#x4EF6;&#x5728;&#x5904;&#x7406;&#x4E8B;&#x4EF6;&#x65F6;&#x591A;&#x6B21;&#x6E32;&#x67D3;,
&#x5C06;&#x591A;&#x4E2A; setState (&#x5305;&#x62EC;&#x7236;&#x7EC4;&#x4EF6;) &#x79FB;&#x5230;&#x6D4F;&#x89C8;&#x5668;&#x4E8B;&#x4EF6;&#x4E4B;&#x540E;&#x6267;&#x884C;
(batch updates: &#x6B64;&#x65F6; React &#x5185;&#x90E8;&#x53D8;&#x91CF; isBatchingUpdates &#x53D8;&#x6210; true),
&#x53EF;&#x4EE5;&#x63D0;&#x5347; React &#x6027;&#x80FD;.
&#x672A;&#x6765;&#x4F1A;&#x5728;&#x66F4;&#x591A;&#x7684;&#x53EF;&#x4EE5; batch updates &#x7684;&#x573A;&#x666F;&#x4E0B;&#x5C06; setState &#x8BBE;&#x4E3A;&#x5F02;&#x6B65;&#x6267;&#x884C;,
&#x6240;&#x4EE5;&#x7F16;&#x5199;&#x4EE3;&#x7801;&#x65F6;&#x6700;&#x597D;&#x5C06; setState &#x603B;&#x662F;&#x5F53;&#x505A;&#x5F02;&#x6B65;&#x6267;&#x884C;&#x51FD;&#x6570;.</p>
<p>Batch Update: &#x4E8B;&#x4EF6;&#x5904;&#x7406;,
Not Bacth Update: Async Work (setTimeout/Promise.then)</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      val<span class="token punctuation">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> val<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x7B2C; 1 &#x6B21; log</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> val<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x7B2C; 2 &#x6B21; log</span>

    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> val<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x7B2C; 3 &#x6B21; log</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> val<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x7B2C; 4 &#x6B21; log</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// =&gt; 0 0 2 3</span>
</code></pre>
<h3 id="componentdidmount"><a name="componentdidmount" class="anchor-navigation-ex-anchor" href="#componentdidmount"><i class="fa fa-link" aria-hidden="true"></i></a>2.2. componentDidMount()</h3>
<ul>
<li>don&apos;t <code>setState</code> directly in this method</li>
<li>can use <code>setInterval</code>/<code>setTimeout</code>/AJAX request/<code>fetch</code> in this method,
and call <code>setState</code> as <code>callback</code> inside these functions</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      error<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      isLoaded<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      items<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&apos;https://api.example.com/items&apos;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
        <span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            isLoaded<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            items<span class="token punctuation">:</span> result<span class="token punctuation">.</span>items
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// Note: it&apos;s important to handle errors here</span>
        <span class="token comment">// instead of a catch() block so that we don&apos;t swallow</span>
        <span class="token comment">// exceptions from actual bugs in components.</span>
        <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            isLoaded<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            error
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> error<span class="token punctuation">,</span> isLoaded<span class="token punctuation">,</span> items <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Error<span class="token punctuation">:</span> <span class="token punctuation">{</span>error<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isLoaded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&gt;</span>
              <span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span> <span class="token punctuation">{</span>item<span class="token punctuation">.</span>price<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="props-validation"><a name="props-validation" class="anchor-navigation-ex-anchor" href="#props-validation"><i class="fa fa-link" aria-hidden="true"></i></a>2.3. Props Validation</h3>
<pre class="language-"><code class="lang-js"><span class="token keyword">static</span> PropTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    arrayProps<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>array
    <span class="token comment">// array/bool/func/number/object/string/symbol/node/element</span>
    <span class="token comment">// React.PropTypes.instanceOf/oneOf/oneOfType</span>
    <span class="token comment">// React.PropTypes.arrayOf(React.PropsTypes.number)</span>
    <span class="token comment">// React.PropTypes.objectOf(React.PropsTypes.number)</span>
    <span class="token comment">// React.PropTypes.any.isRequired</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="element-and-component"><a name="element-and-component" class="anchor-navigation-ex-anchor" href="#element-and-component"><i class="fa fa-link" aria-hidden="true"></i></a>3. Element and Component</h2>
<p>react element &#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x7EAF;&#x5BF9;&#x8C61;, &#x53EF;&#x7531; React.createElement()/JSX/element factory helper &#x521B;&#x5EFA;,
&#x5E76;&#x88AB; react &#x5728;&#x5FC5;&#x8981;&#x65F6;&#x6E32;&#x67D3;&#x6210;&#x771F;&#x5B9E;&#x7684; DOM &#x7ED3;&#x70B9;</p>
<pre class="language-"><code class="lang-js">ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> Form<span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    isSubmitted<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    buttonText<span class="token punctuation">:</span> <span class="token string">&apos;OK!&apos;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&apos;root&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// React: You told me this...</span>
<span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> Form<span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    isSubmitted<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    buttonText<span class="token punctuation">:</span> <span class="token string">&apos;OK!&apos;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// React: ...And Form told me this...</span>
<span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> Button<span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    children<span class="token punctuation">:</span> <span class="token string">&apos;OK!&apos;</span><span class="token punctuation">,</span>
    color<span class="token punctuation">:</span> <span class="token string">&apos;blue&apos;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// React: ...and Button told me this! I guess I&apos;m done.</span>
<span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">&apos;button&apos;</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    className<span class="token punctuation">:</span> <span class="token string">&apos;button button-blue&apos;</span><span class="token punctuation">,</span>
    children<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">&apos;b&apos;</span><span class="token punctuation">,</span>
      props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        children<span class="token punctuation">:</span> <span class="token string">&apos;OK!&apos;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="jsx"><a name="jsx" class="anchor-navigation-ex-anchor" href="#jsx"><i class="fa fa-link" aria-hidden="true"></i></a>3.1. JSX</h3>
<p>&#x5728; JSX &#x4E2D;, &#x5C0F;&#x5199;&#x6807;&#x7B7E;&#x88AB;&#x8BA4;&#x4E3A;&#x662F; HTML &#x6807;&#x7B7E;.
&#x4F46;&#x662F;, &#x542B;&#x6709; <code>.</code> &#x7684;&#x5927;&#x5199;&#x548C;&#x5C0F;&#x5199;&#x6807;&#x7B7E;&#x540D;&#x5374;&#x4E0D;&#x662F;.</p>
<pre class="language-"><code class="lang-js"><span class="token operator">&lt;</span>component <span class="token operator">/</span><span class="token operator">&gt;</span> &#x5C06;&#x88AB;&#x8F6C;&#x6362;&#x4E3A; React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&apos;component&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span>e<span class="token punctuation">,</span> <span class="token constant">HTML</span> &#x6807;&#x7B7E;<span class="token punctuation">)</span>
<span class="token operator">&lt;</span>obj<span class="token punctuation">.</span>component <span class="token operator">/</span><span class="token operator">&gt;</span> &#x5C06;&#x88AB;&#x8F6C;&#x6362;&#x4E3A; React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>component<span class="token punctuation">)</span>
<span class="token operator">&lt;</span>Component <span class="token operator">/</span><span class="token operator">&gt;</span> &#x5C06;&#x88AB;&#x8F6C;&#x6362;&#x4E3A; React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>Component<span class="token punctuation">)</span>
</code></pre>
<h3 id="functionalclass-component"><a name="functionalclass-component" class="anchor-navigation-ex-anchor" href="#functionalclass-component"><i class="fa fa-link" aria-hidden="true"></i></a>3.2. functional/class component</h3>
<ul>
<li>&#x51FD;&#x6570;&#x578B;&#x7EC4;&#x4EF6;&#x6CA1;&#x6709;&#x5B9E;&#x4F8B;, &#x7C7B;&#x578B;&#x7EC4;&#x4EF6;&#x5177;&#x6709;&#x5B9E;&#x4F8B;, &#x4F46;&#x5B9E;&#x4F8B;&#x5316;&#x7684;&#x5DE5;&#x4F5C;&#x7531; react &#x81EA;&#x52A8;&#x5B8C;&#x6210;</li>
<li>class component &#x5177;&#x6709;&#x66F4;&#x591A;&#x7279;&#x6027;: state, lifecycle hook, performance optimizations(shouldComponentUpdate()&#x56DE;&#x8C03;&#x65B9;&#x6CD5;)</li>
</ul>
<h3 id="statefulstateless-component"><a name="statefulstateless-component" class="anchor-navigation-ex-anchor" href="#statefulstateless-component"><i class="fa fa-link" aria-hidden="true"></i></a>3.3. stateful/stateless component</h3>
<h4 id="stateless-component"><a name="stateless-component" class="anchor-navigation-ex-anchor" href="#stateless-component"><i class="fa fa-link" aria-hidden="true"></i></a><a name="stateless-component" class="plugin-anchor" href="#stateless-component"><i class="fa fa-link" aria-hidden="true"></i></a>stateless component</h4>
<p>&#x91C7;&#x7528;&#x51FD;&#x6570;&#x578B;&#x58F0;&#x660E;, &#x4E0D;&#x4F7F;&#x7528; setState(), &#x4E00;&#x822C;&#x4F5C;&#x4E3A;&#x8868;&#x73B0;&#x578B;&#x7EC4;&#x4EF6;</p>
<h4 id="stateful-component"><a name="stateful-component" class="anchor-navigation-ex-anchor" href="#stateful-component"><i class="fa fa-link" aria-hidden="true"></i></a><a name="stateful-component" class="plugin-anchor" href="#stateful-component"><i class="fa fa-link" aria-hidden="true"></i></a>stateful component</h4>
<ul>
<li>&#x91C7;&#x7528;&#x7C7B;&#x578B;&#x58F0;&#x660E;, &#x4F7F;&#x7528; setState(), &#x4E00;&#x822C;&#x4F5C;&#x4E3A;&#x5BB9;&#x5668;&#x578B;&#x7EC4;&#x4EF6;(containers)</li>
<li>&#x7ED3;&#x5408; Redux &#x4E2D;&#x7684; connect &#x65B9;&#x6CD5;, &#x5C06; store &#x4E2D;&#x7684; state &#x4F5C;&#x4E3A;&#x6B64;&#x7C7B;&#x7EC4;&#x4EF6;&#x7684; props</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  counter<span class="token punctuation">:</span> prevState<span class="token punctuation">.</span>counter <span class="token operator">+</span> props<span class="token punctuation">.</span>increment
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="component-lifecycle"><a name="component-lifecycle" class="anchor-navigation-ex-anchor" href="#component-lifecycle"><i class="fa fa-link" aria-hidden="true"></i></a>3.4. Component Lifecycle</h3>
<h4 id="creationmounting"><a name="creationmounting" class="anchor-navigation-ex-anchor" href="#creationmounting"><i class="fa fa-link" aria-hidden="true"></i></a><a name="creationmounting" class="plugin-anchor" href="#creationmounting"><i class="fa fa-link" aria-hidden="true"></i></a>Creation/Mounting</h4>
<p>constructor(props, context) -&gt; getDerivedStateFromProps() -&gt; render() -&gt; componentDidMount()</p>
<h4 id="updating"><a name="updating" class="anchor-navigation-ex-anchor" href="#updating"><i class="fa fa-link" aria-hidden="true"></i></a><a name="updating" class="plugin-anchor" href="#updating"><i class="fa fa-link" aria-hidden="true"></i></a>Updating</h4>
<p>update for three reasons:</p>
<ul>
<li>parent/top (re-)render</li>
<li>this.setState() called</li>
<li>this.forceUpdate() called</li>
</ul>
<p>getDerivedStateFromProps() -&gt; shouldComponentUpdate(nextProps, nextState)
-&gt; render() -&gt; getSnapshotBeforeUpdate() -&gt; componentDidUpdate(prevProps, prevState)</p>
<p>getSnapshotBeforeUpdate:
&#x5728;&#x6700;&#x65B0;&#x7684;&#x6E32;&#x67D3;&#x8F93;&#x51FA;&#x63D0;&#x4EA4;&#x7ED9; DOM &#x524D;&#x5C06;&#x4F1A;&#x7ACB;&#x5373;&#x8C03;&#x7528;,
&#x8FD9;&#x5BF9;&#x4E8E;&#x4ECE; DOM &#x6355;&#x83B7;&#x4FE1;&#x606F;&#xFF08;&#x6BD4;&#x5982;&#xFF1A;&#x6EDA;&#x52A8;&#x4F4D;&#x7F6E;&#xFF09;&#x5F88;&#x6709;&#x7528;.</p>
<h4 id="unmounting"><a name="unmounting" class="anchor-navigation-ex-anchor" href="#unmounting"><i class="fa fa-link" aria-hidden="true"></i></a><a name="unmounting" class="plugin-anchor" href="#unmounting"><i class="fa fa-link" aria-hidden="true"></i></a>Unmounting</h4>
<p>componentWillUnmount()</p>
<h3 id="refs"><a name="refs" class="anchor-navigation-ex-anchor" href="#refs"><i class="fa fa-link" aria-hidden="true"></i></a>3.5. Refs</h3>
<p>Refs &#x7528;&#x4E8E;&#x8FD4;&#x56DE;&#x5BF9;&#x5143;&#x7D20;&#x7684;&#x5F15;&#x7528;.
&#x4F46;&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;, &#x5E94;&#x8BE5;&#x907F;&#x514D;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;.
&#x5F53;&#x9700;&#x8981;&#x76F4;&#x63A5;&#x8BBF;&#x95EE; DOM &#x5143;&#x7D20;&#x6216;&#x7EC4;&#x4EF6;&#x7684;&#x5B9E;&#x4F8B;&#x65F6;, &#x5B83;&#x4EEC;&#x53EF;&#x80FD;&#x975E;&#x5E38;&#x6709;&#x7528;:</p>
<ul>
<li>Managing focus, text selection, or media playback.</li>
<li>Triggering imperative animations.</li>
<li>Integrating with third-party DOM libraries.k</li>
</ul>
<h4 id="forward-refs"><a name="forward-refs" class="anchor-navigation-ex-anchor" href="#forward-refs"><i class="fa fa-link" aria-hidden="true"></i></a><a name="forward-refs" class="plugin-anchor" href="#forward-refs"><i class="fa fa-link" aria-hidden="true"></i></a>Forward Refs</h4>
<p>&#x4F60;&#x4E0D;&#x80FD;&#x5728;&#x51FD;&#x6570;&#x5F0F;&#x7EC4;&#x4EF6;&#x4E0A;&#x4F7F;&#x7528;<code>ref</code>&#x5C5E;&#x6027;,
&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x6CA1;&#x6709;&#x5B9E;&#x4F8B;, &#x4F46;&#x53EF;&#x4EE5;&#x5728;&#x51FD;&#x6570;&#x5F0F;&#x7EC4;&#x4EF6;&#x5185;&#x90E8;&#x4F7F;&#x7528;<code>ref</code>.
Ref forwarding &#x662F;&#x4E00;&#x4E2A;&#x7279;&#x6027;,
&#x5B83;&#x5141;&#x8BB8;&#x4E00;&#x4E9B;&#x7EC4;&#x4EF6;&#x83B7;&#x53D6;&#x63A5;&#x6536;&#x5230; ref &#x5BF9;&#x8C61;&#x5E76;&#x5C06;&#x5B83;&#x8FDB;&#x4E00;&#x6B65;&#x4F20;&#x9012;&#x7ED9;&#x5B50;&#x7EC4;&#x4EF6;.</p>
<pre class="language-"><code class="lang-js"><span class="token comment">// functional component</span>
<span class="token keyword">const</span> ButtonElement <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>button ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">&quot;CustomButton&quot;</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create ref to the DOM button:</span>
<span class="token comment">// get ref to `&lt;button&gt;`</span>
<span class="token keyword">const</span> ref <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span>ButtonElement ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token string">&apos;Forward Ref&apos;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ButtonElement<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="callback-refs"><a name="callback-refs" class="anchor-navigation-ex-anchor" href="#callback-refs"><i class="fa fa-link" aria-hidden="true"></i></a><a name="callback-refs" class="plugin-anchor" href="#callback-refs"><i class="fa fa-link" aria-hidden="true"></i></a>Callback Refs</h4>
<pre class="language-"><code class="lang-js"><span class="token keyword">class</span> <span class="token class-name">UserInput</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">setSearchInput</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>input <span class="token operator">=</span> input<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>input
        type<span class="token operator">=</span><span class="token string">&apos;text&apos;</span>
        ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>setSearchInput<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token comment">// Access DOM input in handle submit</span>
      <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&apos;submit&apos;</span><span class="token operator">&gt;</span>Submit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="hoc-higher-order-components"><a name="hoc-higher-order-components" class="anchor-navigation-ex-anchor" href="#hoc-higher-order-components"><i class="fa fa-link" aria-hidden="true"></i></a>3.6. HOC (Higher-Order Components)</h3>
<p>solve:</p>
<ul>
<li>reuse code with using ES6 classes</li>
<li>compose multiple HOCs</li>
</ul>
<p>problem:</p>
<ul>
<li>indirection issues: which HOC providing a certain prop</li>
<li>name collision: overwrite the same name prop silently</li>
</ul>
<pre class="language-"><code class="lang-jsx"><span class="token comment">// ToggleableMenu.jsx</span>
<span class="token keyword">function</span> <span class="token function">withToggleable</span><span class="token punctuation">(</span><span class="token parameter">Clickable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> React<span class="token punctuation">.</span>Component <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>toggle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> show<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prevState</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> show<span class="token punctuation">:</span> <span class="token operator">!</span>prevState<span class="token punctuation">.</span>show <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Clickable</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">this</span><span class="token punctuation">.</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>toggle<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">NormalMenu</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withToggleable</span><span class="token punctuation">(</span>NormalMenu<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-jsx"><span class="token keyword">class</span> <span class="token class-name">Menu</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ToggleableMenu</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>First Menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Some content<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ToggleableMenu</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ToggleableMenu</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Second Menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Another content<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ToggleableMenu</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ToggleableMenu</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Third Menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>More content<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ToggleableMenu</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="render-props-children-as-function"><a name="render-props-children-as-function" class="anchor-navigation-ex-anchor" href="#render-props-children-as-function"><i class="fa fa-link" aria-hidden="true"></i></a>3.7. Render Props (Children as Function)</h3>
<p>solve:</p>
<ul>
<li>reuse code with using ES6 classes</li>
<li>lowest level of indirection</li>
<li>no naming collision</li>
</ul>
<p>advantages:</p>
<ul>
<li>separate presentation from logic</li>
<li>extendable</li>
<li>reusable (abstract same logic)</li>
</ul>
<p>problem:</p>
<ul>
<li>minor memory issues when defining a closure for every render</li>
<li>callback hell (when many cross-cutting concerns are applied to a component)</li>
</ul>
<pre class="language-"><code class="lang-jsx"><span class="token keyword">class</span> <span class="token class-name">Toggleable</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>toggle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> show<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prevState</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> show<span class="token punctuation">:</span> <span class="token operator">!</span>prevState<span class="token punctuation">.</span>show <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>toggle<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">ToggleableMenu</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Toggleable</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">show<span class="token punctuation">,</span> onClick</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">{</span>show <span class="token operator">&amp;&amp;</span> props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Toggleable</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-jsx"><span class="token keyword">class</span> <span class="token class-name">Menu</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ToggleableMenu</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>First Menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Some content<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ToggleableMenu</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ToggleableMenu</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Second Menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Another content<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ToggleableMenu</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ToggleableMenu</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Third Menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>More content<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ToggleableMenu</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="hooks"><a name="hooks" class="anchor-navigation-ex-anchor" href="#hooks"><i class="fa fa-link" aria-hidden="true"></i></a>4. Hooks</h2>
<ul>
<li>reuse stateful logic between components
(avoid wrapper hell in render props or HOC)</li>
<li>split one complex component into smaller functions</li>
<li>use more of React&apos;s features without classes</li>
<li>class components will read <code>this.props</code> <strong>too early</strong> or <strong>too late</strong>,
because of mutable <code>this</code> in React
(however <code>props</code> argument of function components is immutable),
that says <em>function components capture the rendered values</em>.
more details on
<a href="https://overreacted.io/how-are-function-components-different-from-classes/" target="_blank">Overreacted</a></li>
</ul>
<h3 id="default-hooks"><a name="default-hooks" class="anchor-navigation-ex-anchor" href="#default-hooks"><i class="fa fa-link" aria-hidden="true"></i></a>4.1. Default Hooks</h3>
<h4 id="usememo"><a name="usememo" class="anchor-navigation-ex-anchor" href="#usememo"><i class="fa fa-link" aria-hidden="true"></i></a><a name="usememo" class="plugin-anchor" href="#usememo"><i class="fa fa-link" aria-hidden="true"></i></a>useMemo</h4>
<ul>
<li>returns a memoized value</li>
<li>only recompute the memoized value when one of the dependencies has changed</li>
<li><strong>optimization</strong> helps to avoid expensive calculations on every render</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token function-variable function">Button</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> color<span class="token punctuation">,</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> textColor <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">slowlyCalculateTextColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>color<span class="token punctuation">]</span> <span class="token comment">// &#x2705; Don&#x2019;t recalculate until `color` changes</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&apos;Button-&apos;</span> <span class="token operator">+</span> color <span class="token operator">+</span> <span class="token string">&apos; Button-text-&apos;</span> <span class="token operator">+</span> textColor<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="usecallback"><a name="usecallback" class="anchor-navigation-ex-anchor" href="#usecallback"><i class="fa fa-link" aria-hidden="true"></i></a><a name="usecallback" class="plugin-anchor" href="#usecallback"><i class="fa fa-link" aria-hidden="true"></i></a>useCallback</h4>
<ul>
<li>returns a memoized callback</li>
<li>&#x5BF9;&#x4E8B;&#x4EF6;&#x53E5;&#x67C4;&#x8FDB;&#x884C;&#x7F13;&#x5B58;, <code>useState</code> &#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x8FD4;&#x56DE;&#x503C;&#x662F; <code>dispatch</code>,
&#x4F46;&#x662F;&#x6BCF;&#x6B21;&#x90FD;&#x662F;&#x8FD4;&#x56DE;&#x65B0;&#x7684;&#x51FD;&#x6570;, &#x4F7F;&#x7528; <code>useCallback</code>, &#x53EF;&#x4EE5;&#x8BA9;&#x5B83;&#x4F7F;&#x7528;&#x4E0A;&#x6B21;&#x7684;&#x51FD;&#x6570;.
&#x5728;&#x865A;&#x62DF; DOM &#x66F4;&#x65B0;&#x8FC7;&#x7A0B;&#x4E2D;, &#x5982;&#x679C;&#x4E8B;&#x4EF6;&#x53E5;&#x67C4;&#x76F8;&#x540C;, &#x90A3;&#x4E48;&#x5C31;&#x4E0D;&#x7528;&#x6BCF;&#x6B21;&#x90FD;&#x8FDB;&#x884C;
<code>removeEventListner</code> &#x4E0E; <code>addEventListner</code>.</li>
<li><code>useCallback(fn, deps)</code> is equivalent to <code>useMemo(() =&gt; fn, deps)</code></li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>query<span class="token punctuation">,</span> setQuery<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&apos;react&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// &#x2705; Preserves identity until query changes</span>
  <span class="token keyword">const</span> fetchData <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">&apos;https://hn.algolia.com/api/v1/search?query=&apos;</span> <span class="token operator">+</span> query<span class="token punctuation">;</span>
    <span class="token comment">// ... Fetch data and return it ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>query<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x2705; Callback deps are OK</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Child fetchData<span class="token operator">=</span><span class="token punctuation">{</span>fetchData<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> fetchData <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>setData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>fetchData<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x2705; Effect deps are OK</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="usestate"><a name="usestate" class="anchor-navigation-ex-anchor" href="#usestate"><i class="fa fa-link" aria-hidden="true"></i></a><a name="usestate" class="plugin-anchor" href="#usestate"><i class="fa fa-link" aria-hidden="true"></i></a>useState</h4>
<p>read rendered props/state</p>
<pre class="language-"><code class="lang-js"><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">prevState</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Object.assign would also work</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>prevState<span class="token punctuation">,</span> <span class="token operator">...</span>updatedValues <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Declare a new state variable, which we&apos;ll call &quot;count&quot;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>You clicked <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span>Click me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-"><code class="lang-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">FriendStatus</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isOnline<span class="token punctuation">,</span> setIsOnline<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleStatusChange</span><span class="token punctuation">(</span><span class="token parameter">status</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setIsOnline</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span>isOnline<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    ChatAPI<span class="token punctuation">.</span><span class="token function">subscribeToFriendStatus</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      ChatAPI<span class="token punctuation">.</span><span class="token function">unsubscribeFromFriendStatus</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>isOnline <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&apos;Loading...&apos;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> isOnline <span class="token operator">?</span> <span class="token string">&apos;Online&apos;</span> <span class="token punctuation">:</span> <span class="token string">&apos;Offline&apos;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Mount with { friend: { id: 100 } } props</span>
ChatAPI<span class="token punctuation">.</span><span class="token function">subscribeToFriendStatus</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Run first effect</span>

<span class="token comment">// Update with { friend: { id: 200 } } props</span>
<span class="token comment">// Clean up previous effect</span>
ChatAPI<span class="token punctuation">.</span><span class="token function">unsubscribeFromFriendStatus</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
ChatAPI<span class="token punctuation">.</span><span class="token function">subscribeToFriendStatus</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Run next effect</span>

<span class="token comment">// Update with { friend: { id: 300 } } props</span>
<span class="token comment">// Clean up previous effect</span>
ChatAPI<span class="token punctuation">.</span><span class="token function">unsubscribeFromFriendStatus</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
ChatAPI<span class="token punctuation">.</span><span class="token function">subscribeToFriendStatus</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Run next effect</span>

<span class="token comment">// Unmount</span>
ChatAPI<span class="token punctuation">.</span><span class="token function">unsubscribeFromFriendStatus</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Clean up last effect</span>
</code></pre>
<h4 id="useref"><a name="useref" class="anchor-navigation-ex-anchor" href="#useref"><i class="fa fa-link" aria-hidden="true"></i></a><a name="useref" class="plugin-anchor" href="#useref"><i class="fa fa-link" aria-hidden="true"></i></a>useRef</h4>
<p><code>useRef</code> read rendered props/state from <strong>the future</strong>.
Generally, you should avoid reading or setting refs
during rendering because they&#x2019;re mutable.
We want to keep the rendering predictable.
However, if we want to get the latest value of a particular prop or state,
it&apos;s good to read/set <code>ref.current</code>.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> latestCount <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Set the mutable latest value</span>
    latestCount<span class="token punctuation">.</span>current <span class="token operator">=</span> count<span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Read the mutable latest value</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>latestCount<span class="token punctuation">.</span>current<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="useeffect"><a name="useeffect" class="anchor-navigation-ex-anchor" href="#useeffect"><i class="fa fa-link" aria-hidden="true"></i></a><a name="useeffect" class="plugin-anchor" href="#useeffect"><i class="fa fa-link" aria-hidden="true"></i></a>useEffect</h4>
<p><a href="https://overreacted.io/a-complete-guide-to-useeffect" target="_blank">Complete Guide</a></p>
<p><code>useEffect</code> lifecycle:
React renders UI for current props/state to screen,
React cleans up the effect for prev props/state,
React runs the effect for current props/state.</p>
<p><code>useEffect</code> nasty loop:
The effect hook runs when the component mounts but also when the component updates.
Because we are setting the state after every data fetch,
the component updates and the effect runs again.
It fetches the data again and again.
That&#x2019;s a bug and needs to be avoided.</p>
<p><code>useEffect</code> deps list:
That&#x2019;s why provide an <strong>empty array</strong> as second argument to the effect hook
to avoid activating it on component updates
but <strong>only for the mounting</strong> of the component.
If one of the variables changes, the hook runs again.
For listeners binding, use <code>[]</code> deps list should be better.</p>
<p>Functions in useEffect:</p>
<ul>
<li>If only use some functions inside an effect, move them directly into that effect.</li>
<li>Hoisting functions that don&#x2019;t need props or state outside of component,
and pull the ones that are used only by an effect inside of that effect.</li>
<li>for useCallback function, it should be in deps list <code>useEffect(() =&gt; {}, [callback])</code></li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment">// https://www.robinwieruch.de/react-hooks-fetch-data</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&apos;axios&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">useDataApi</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">initialUrl<span class="token punctuation">,</span> initialData</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>url<span class="token punctuation">,</span> setUrl<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isLoading<span class="token punctuation">,</span> setIsLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isError<span class="token punctuation">,</span> setIsError<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">fetchData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setIsError</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setIsLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">setData</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setIsError</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token function">setIsLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>url<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">doFetch</span> <span class="token operator">=</span> <span class="token parameter">url</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> isLoading<span class="token punctuation">,</span> isError<span class="token punctuation">,</span> doFetch <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="basic-rules"><a name="basic-rules" class="anchor-navigation-ex-anchor" href="#basic-rules"><i class="fa fa-link" aria-hidden="true"></i></a>4.2. Basic Rules</h3>
<ul>
<li>only call Hooks at the top level (don&apos;t inside loops, conditions or nested functions)</li>
<li>only call Hooks from React function components</li>
</ul>
<h3 id="hooks-internel"><a name="hooks-internel" class="anchor-navigation-ex-anchor" href="#hooks-internel"><i class="fa fa-link" aria-hidden="true"></i></a>4.3. Hooks Internel</h3>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> MyReact <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> hooks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    currentHook <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// array of hooks, and an iterator!</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">Component</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> Comp <span class="token operator">=</span> <span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// run effects</span>
      Comp<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      currentHook <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// reset for next render</span>
      <span class="token keyword">return</span> Comp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> depArray</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> hasNoDeps <span class="token operator">=</span> <span class="token operator">!</span>depArray<span class="token punctuation">;</span>
      <span class="token keyword">const</span> deps <span class="token operator">=</span> hooks<span class="token punctuation">[</span>currentHook<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// type: array | undefined</span>
      <span class="token keyword">const</span> hasChangedDeps <span class="token operator">=</span> deps
        <span class="token operator">?</span> <span class="token operator">!</span>depArray<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> el <span class="token operator">===</span> deps<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>hasNoDeps <span class="token operator">||</span> hasChangedDeps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        hooks<span class="token punctuation">[</span>currentHook<span class="token punctuation">]</span> <span class="token operator">=</span> depArray<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      currentHook<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// done with this hook</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">useState</span><span class="token punctuation">(</span><span class="token parameter">initialValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      hooks<span class="token punctuation">[</span>currentHook<span class="token punctuation">]</span> <span class="token operator">=</span> hooks<span class="token punctuation">[</span>currentHook<span class="token punctuation">]</span> <span class="token operator">||</span> initialValue<span class="token punctuation">;</span> <span class="token comment">// type: any</span>
      <span class="token keyword">const</span> setStateHookIndex <span class="token operator">=</span> currentHook<span class="token punctuation">;</span> <span class="token comment">// for setState&apos;s closure!</span>
      <span class="token keyword">const</span> <span class="token function-variable function">setState</span> <span class="token operator">=</span> <span class="token parameter">newState</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>hooks<span class="token punctuation">[</span>setStateHookIndex<span class="token punctuation">]</span> <span class="token operator">=</span> newState<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">[</span>hooks<span class="token punctuation">[</span>currentHook<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span> setState<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> MyReact<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span> setText<span class="token punctuation">]</span> <span class="token operator">=</span> MyReact<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&apos;foo&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2nd state hook!</span>
  MyReact<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;effect&apos;</span><span class="token punctuation">,</span> count<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> text<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">click</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">type</span><span class="token punctuation">:</span> <span class="token parameter">txt</span> <span class="token operator">=&gt;</span> <span class="token function">setText</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">noop</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;render&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> text <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> App<span class="token punctuation">;</span>

App <span class="token operator">=</span> MyReact<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>Counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// effect 0 foo</span>
<span class="token comment">// render {count: 0, text: &apos;foo&apos;}</span>

App<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
App <span class="token operator">=</span> MyReact<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>Counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// effect 1 foo</span>
<span class="token comment">// render {count: 1, text: &apos;foo&apos;}</span>

App<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&apos;bar&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
App <span class="token operator">=</span> MyReact<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>Counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// effect 1 bar</span>
<span class="token comment">// render {count: 1, text: &apos;bar&apos;}</span>

App<span class="token punctuation">.</span><span class="token function">noop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
App <span class="token operator">=</span> MyReact<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>Counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// // no effect run</span>
<span class="token comment">// render {count: 1, text: &apos;bar&apos;}</span>

App<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
App <span class="token operator">=</span> MyReact<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>Counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// effect 2 bar</span>
<span class="token comment">// render {count: 2, text: &apos;bar&apos;}</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span> setText<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useSplitURL</span><span class="token punctuation">(</span><span class="token string">&apos;www.netlify.com&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">type</span><span class="token punctuation">:</span> <span class="token parameter">txt</span> <span class="token operator">=&gt;</span> <span class="token function">setText</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> text <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">useSplitURL</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span> setText<span class="token punctuation">]</span> <span class="token operator">=</span> MyReact<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> masked <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&apos;.&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>masked<span class="token punctuation">,</span> setText<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> App<span class="token punctuation">;</span>

App <span class="token operator">=</span> MyReact<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>Component<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { text: [ &apos;www&apos;, &apos;netlify&apos;, &apos;com&apos; ] }</span>

App<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&apos;www.reactjs.org&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
App <span class="token operator">=</span> MyReact<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>Component<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { text: [ &apos;www&apos;, &apos;reactjs&apos;, &apos;org&apos; ] }}</span>
</code></pre>
<h3 id="custom-hooks"><a name="custom-hooks" class="anchor-navigation-ex-anchor" href="#custom-hooks"><i class="fa fa-link" aria-hidden="true"></i></a>4.4. Custom Hooks</h3>
<ul>
<li><a href="https://usehooks.com" target="_blank">More Custom Hooks</a></li>
</ul>
<h4 id="lifecycle-hooks"><a name="lifecycle-hooks" class="anchor-navigation-ex-anchor" href="#lifecycle-hooks"><i class="fa fa-link" aria-hidden="true"></i></a><a name="lifecycle-hooks" class="plugin-anchor" href="#lifecycle-hooks"><i class="fa fa-link" aria-hidden="true"></i></a>LifeCycle Hooks</h4>
<p>componentDidMount</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token function-variable function">useMount</span> <span class="token operator">=</span> <span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>componentWillUnmount</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token function-variable function">useUnmount</span> <span class="token operator">=</span> <span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> fn<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>componentDidUpdate</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token function-variable function">useUpdate</span> <span class="token operator">=</span> <span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mounting <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mounting<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// first get called for componentDidMount lifecycle</span>
      <span class="token comment">// so skip it</span>
      mounting<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>Force Update</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token function-variable function">useUpdate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token comment">// @ts-ignore</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">VoidFunction</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">VoidFunctionCreator</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> VoidFunction<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> max<span class="token punctuation">:</span> number <span class="token operator">=</span> <span class="token number">9007199254740990</span><span class="token punctuation">;</span> <span class="token comment">// Number.MAX_SAFE_INTEGER - 1;</span>

<span class="token keyword">const</span> useForceUpdate<span class="token punctuation">:</span> VoidFunctionCreator <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token parameter">VoidFunction</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> forceUpdate<span class="token punctuation">:</span> VoidFunction <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> forceUpdate<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> useForceUpdate<span class="token punctuation">;</span>
</code></pre>
<p>isMounted</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token function-variable function">useIsMounted</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isMount<span class="token punctuation">,</span> setIsMount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isMount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setIsMount</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setIsMount</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> isMount<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="async-data-hook"><a name="async-data-hook" class="anchor-navigation-ex-anchor" href="#async-data-hook"><i class="fa fa-link" aria-hidden="true"></i></a><a name="async-data-hook" class="plugin-anchor" href="#async-data-hook"><i class="fa fa-link" aria-hidden="true"></i></a>Async Data Hook</h4>
<pre class="language-"><code class="lang-jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">useFriendStatus</span><span class="token punctuation">(</span><span class="token parameter">friendID</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isOnline<span class="token punctuation">,</span> setIsOnline<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleStatusChange</span><span class="token punctuation">(</span><span class="token parameter">status</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setIsOnline</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span>isOnline<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    ChatAPI<span class="token punctuation">.</span><span class="token function">subscribeToFriendStatus</span><span class="token punctuation">(</span>friendID<span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      ChatAPI<span class="token punctuation">.</span><span class="token function">unsubscribeFromFriendStatus</span><span class="token punctuation">(</span>friendID<span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> isOnline<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">FriendStatus</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isOnline <span class="token operator">=</span> <span class="token function">useFriendStatus</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>isOnline <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&apos;Loading...&apos;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> isOnline <span class="token operator">?</span> <span class="token string">&apos;Online&apos;</span> <span class="token punctuation">:</span> <span class="token string">&apos;Offline&apos;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">FriendListItem</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isOnline <span class="token operator">=</span> <span class="token function">useFriendStatus</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> color<span class="token punctuation">:</span> isOnline <span class="token operator">?</span> <span class="token string">&apos;green&apos;</span> <span class="token punctuation">:</span> <span class="token string">&apos;black&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-"><code class="lang-jsx"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Fragment<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&apos;axios&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">useDataApi</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">initialUrl<span class="token punctuation">,</span> initialData</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>url<span class="token punctuation">,</span> setUrl<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isLoading<span class="token punctuation">,</span> setIsLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isError<span class="token punctuation">,</span> setIsError<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">fetchData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setIsError</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setIsLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">setData</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setIsError</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">setIsLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>url<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">doGet</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> url</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> isLoading<span class="token punctuation">,</span> isError<span class="token punctuation">,</span> doGet <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>query<span class="token punctuation">,</span> setQuery<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&apos;redux&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> isLoading<span class="token punctuation">,</span> isError<span class="token punctuation">,</span> doGet <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useDataApi</span><span class="token punctuation">(</span>
    <span class="token string">&apos;http://hn.algolia.com/api/v1/search?query=redux&apos;</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> hits<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span>
        <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">event</span> <span class="token operator">=&gt;</span>
          <span class="token function">doGet</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`http://hn.algolia.com/api/v1/search?query=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>query<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span></span>
      <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
          <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>query<span class="token punctuation">}</span></span>
          <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token function">setQuery</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Search<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>

      <span class="token punctuation">{</span>isError <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Something went wrong <span class="token operator">...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span>

      <span class="token punctuation">{</span>isLoading <span class="token operator">?</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Loading <span class="token operator">...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">{</span>data<span class="token punctuation">.</span>hits<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>objectID<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>url<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre>
<h4 id="reducer-hook"><a name="reducer-hook" class="anchor-navigation-ex-anchor" href="#reducer-hook"><i class="fa fa-link" aria-hidden="true"></i></a><a name="reducer-hook" class="plugin-anchor" href="#reducer-hook"><i class="fa fa-link" aria-hidden="true"></i></a>Reducer Hook</h4>
<pre class="language-"><code class="lang-jsx"><span class="token keyword">function</span> <span class="token function">useReducer</span><span class="token punctuation">(</span><span class="token parameter">reducer<span class="token punctuation">,</span> initialState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> nextState <span class="token operator">=</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setState</span><span class="token punctuation">(</span>nextState<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Todos</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>todos<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>todosReducer<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleAddClick</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">&apos;add&apos;</span><span class="token punctuation">,</span> text <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="previous-hook"><a name="previous-hook" class="anchor-navigation-ex-anchor" href="#previous-hook"><i class="fa fa-link" aria-hidden="true"></i></a><a name="previous-hook" class="plugin-anchor" href="#previous-hook"><i class="fa fa-link" aria-hidden="true"></i></a>Previous Hook</h4>
<pre class="language-"><code class="lang-jsx"><span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> prevCount <span class="token operator">=</span> <span class="token function">usePrevious</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>
      Now<span class="token punctuation">:</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token punctuation">,</span> before<span class="token punctuation">:</span> <span class="token punctuation">{</span>prevCount<span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">usePrevious</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    ref<span class="token punctuation">.</span>current <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> ref<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="store-hook"><a name="store-hook" class="anchor-navigation-ex-anchor" href="#store-hook"><i class="fa fa-link" aria-hidden="true"></i></a><a name="store-hook" class="plugin-anchor" href="#store-hook"><i class="fa fa-link" aria-hidden="true"></i></a>Store Hook</h4>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token punctuation">{</span>
  state<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>setters<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">setter</span> <span class="token operator">=&gt;</span> <span class="token function">setter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  setters<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Bind the setState function to the store object so</span>
<span class="token comment">// we don&apos;t lose context when calling it elsewhere</span>
store<span class="token punctuation">.</span>setState <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// this is the custom hook we&apos;ll call on components.</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> <span class="token keyword">set</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>store<span class="token punctuation">.</span>setters<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    store<span class="token punctuation">.</span>setters<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> store<span class="token punctuation">.</span>setState<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="history-hook"><a name="history-hook" class="anchor-navigation-ex-anchor" href="#history-hook"><i class="fa fa-link" aria-hidden="true"></i></a><a name="history-hook" class="plugin-anchor" href="#history-hook"><i class="fa fa-link" aria-hidden="true"></i></a>History Hook</h4>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> useReducer<span class="token punctuation">,</span> useCallback <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>

<span class="token comment">// Initial state that we pass into useReducer</span>
<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// Array of previous state values updated each time we push a new state</span>
  past<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// Current state value</span>
  present<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token comment">// Will contain &quot;future&quot; state values if we undo (so we can redo)</span>
  future<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Our reducer function to handle state changes based on action</span>
<span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> past<span class="token punctuation">,</span> present<span class="token punctuation">,</span> future <span class="token punctuation">}</span> <span class="token operator">=</span> state<span class="token punctuation">;</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&apos;UNDO&apos;</span><span class="token punctuation">:</span>
      <span class="token keyword">const</span> previous <span class="token operator">=</span> past<span class="token punctuation">[</span>past<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> newPast <span class="token operator">=</span> past<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> past<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        past<span class="token punctuation">:</span> newPast<span class="token punctuation">,</span>
        present<span class="token punctuation">:</span> previous<span class="token punctuation">,</span>
        future<span class="token punctuation">:</span> <span class="token punctuation">[</span>present<span class="token punctuation">,</span> <span class="token operator">...</span>future<span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&apos;REDO&apos;</span><span class="token punctuation">:</span>
      <span class="token keyword">const</span> next <span class="token operator">=</span> future<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> newFuture <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        past<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>past<span class="token punctuation">,</span> present<span class="token punctuation">]</span><span class="token punctuation">,</span>
        present<span class="token punctuation">:</span> next<span class="token punctuation">,</span>
        future<span class="token punctuation">:</span> newFuture
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&apos;SET&apos;</span><span class="token punctuation">:</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> newPresent <span class="token punctuation">}</span> <span class="token operator">=</span> action<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>newPresent <span class="token operator">===</span> present<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> state<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        past<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>past<span class="token punctuation">,</span> present<span class="token punctuation">]</span><span class="token punctuation">,</span>
        present<span class="token punctuation">:</span> newPresent<span class="token punctuation">,</span>
        future<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&apos;CLEAR&apos;</span><span class="token punctuation">:</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> initialPresent <span class="token punctuation">}</span> <span class="token operator">=</span> action<span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>initialState<span class="token punctuation">,</span>
        present<span class="token punctuation">:</span> initialPresent
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Hook</span>
<span class="token keyword">const</span> <span class="token function-variable function">useHistory</span> <span class="token operator">=</span> <span class="token parameter">initialPresent</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>initialState<span class="token punctuation">,</span>
    present<span class="token punctuation">:</span> initialPresent
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> canUndo <span class="token operator">=</span> state<span class="token punctuation">.</span>past<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> canRedo <span class="token operator">=</span> state<span class="token punctuation">.</span>future<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token comment">// Setup our callback functions</span>
  <span class="token comment">// We memoize with useCallback to prevent unnecessary re-renders</span>

  <span class="token keyword">const</span> undo <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>canUndo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">&apos;UNDO&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>canUndo<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> redo <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>canRedo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">&apos;REDO&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>canRedo<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token keyword">set</span> <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token parameter">newPresent</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">&apos;SET&apos;</span><span class="token punctuation">,</span> newPresent <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    dispatch
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> clear <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">&apos;CLEAR&apos;</span><span class="token punctuation">,</span> initialPresent <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    dispatch
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// If needed we could also return past and future state</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> state<span class="token punctuation">:</span> state<span class="token punctuation">.</span>present<span class="token punctuation">,</span> <span class="token keyword">set</span><span class="token punctuation">,</span> undo<span class="token punctuation">,</span> redo<span class="token punctuation">,</span> clear<span class="token punctuation">,</span> canUndo<span class="token punctuation">,</span> canRedo <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="debounce-hook"><a name="debounce-hook" class="anchor-navigation-ex-anchor" href="#debounce-hook"><i class="fa fa-link" aria-hidden="true"></i></a><a name="debounce-hook" class="plugin-anchor" href="#debounce-hook"><i class="fa fa-link" aria-hidden="true"></i></a>Debounce Hook</h4>
<pre class="language-"><code class="lang-js"><span class="token comment">// Hook</span>
<span class="token keyword">function</span> <span class="token function">useDebounce</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// State and setters for debounced value</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>debouncedValue<span class="token punctuation">,</span> setDebouncedValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Update debounced value after delay</span>
      <span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setDebouncedValue</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Cancel the timeout if value changes (also on delay change or unmount)</span>
      <span class="token comment">// This is how we prevent debounced value</span>
      <span class="token comment">// from updating if value is changed ...</span>
      <span class="token comment">// .. within the delay period. Timeout gets cleared and restarted.</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>value<span class="token punctuation">,</span> delay<span class="token punctuation">]</span> <span class="token comment">// Only re-call effect if value or delay changes</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> debouncedValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Usage</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>searchTerm<span class="token punctuation">,</span> setSearchTerm<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&apos;&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> debouncedSearchTerm <span class="token operator">=</span> <span class="token function">useDebounce</span><span class="token punctuation">(</span>searchTerm<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>debouncedSearchTerm<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="context-hook"><a name="context-hook" class="anchor-navigation-ex-anchor" href="#context-hook"><i class="fa fa-link" aria-hidden="true"></i></a><a name="context-hook" class="plugin-anchor" href="#context-hook"><i class="fa fa-link" aria-hidden="true"></i></a>Context Hook</h4>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> CountContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">CountProvider</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> value <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">,</span>
      setCount
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>CountContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">useCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> context <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useContext</span><span class="token punctuation">(</span>CountContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&apos;useCount must be used within a CountProvider&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> setCount <span class="token punctuation">}</span> <span class="token operator">=</span> context<span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token parameter">c</span> <span class="token operator">=&gt;</span> c <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">,</span>
    increment
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> CountProvider<span class="token punctuation">,</span> useCount <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="router-hook"><a name="router-hook" class="anchor-navigation-ex-anchor" href="#router-hook"><i class="fa fa-link" aria-hidden="true"></i></a><a name="router-hook" class="plugin-anchor" href="#router-hook"><i class="fa fa-link" aria-hidden="true"></i></a>Router Hook</h4>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> __RouterContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react-router&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> useForceUpdate <span class="token keyword">from</span> <span class="token string">&apos;use-force-update&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">useReactRouter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> forceUpdate <span class="token operator">=</span> <span class="token function">useForceUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> routerContext <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>__RouterContext<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> routerContext<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>forceUpdate<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>routerContext<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> routerContext<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="script-loading-hook"><a name="script-loading-hook" class="anchor-navigation-ex-anchor" href="#script-loading-hook"><i class="fa fa-link" aria-hidden="true"></i></a><a name="script-loading-hook" class="plugin-anchor" href="#script-loading-hook"><i class="fa fa-link" aria-hidden="true"></i></a>Script Loading Hook</h4>
<pre class="language-"><code class="lang-js"><span class="token comment">// Hook</span>
<span class="token keyword">let</span> cachedScripts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">useScript</span> <span class="token operator">=</span> <span class="token parameter">src</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Keeping track of script loaded and error state</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    loaded<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    error<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// If cachedScripts array already includes src</span>
      <span class="token comment">// that means another instance ...</span>
      <span class="token comment">// ... of this hook already loaded this script, so no need to load again.</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>cachedScripts<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          loaded<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          error<span class="token punctuation">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        cachedScripts<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Create script</span>
        <span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&apos;script&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        script<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>
        script<span class="token punctuation">.</span>async <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token comment">// Script event listener callbacks for load and error</span>
        <span class="token keyword">const</span> <span class="token function-variable function">onScriptLoad</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            loaded<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            error<span class="token punctuation">:</span> <span class="token boolean">false</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> <span class="token function-variable function">onScriptError</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// Remove from cachedScripts we can try loading again</span>
          <span class="token keyword">const</span> index <span class="token operator">=</span> cachedScripts<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> cachedScripts<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          script<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            loaded<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            error<span class="token punctuation">:</span> <span class="token boolean">true</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        script<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&apos;load&apos;</span><span class="token punctuation">,</span> onScriptLoad<span class="token punctuation">)</span><span class="token punctuation">;</span>
        script<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&apos;error&apos;</span><span class="token punctuation">,</span> onScriptError<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Add script to document body</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Remove event listeners on cleanup</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          script<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&apos;load&apos;</span><span class="token punctuation">,</span> onScriptLoad<span class="token punctuation">)</span><span class="token punctuation">;</span>
          script<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&apos;error&apos;</span><span class="token punctuation">,</span> onScriptError<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>src<span class="token punctuation">]</span> <span class="token comment">// Only re-run effect if script src changes</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span>state<span class="token punctuation">.</span>loaded<span class="token punctuation">,</span> state<span class="token punctuation">.</span>error<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="form-hook"><a name="form-hook" class="anchor-navigation-ex-anchor" href="#form-hook"><i class="fa fa-link" aria-hidden="true"></i></a><a name="form-hook" class="plugin-anchor" href="#form-hook"><i class="fa fa-link" aria-hidden="true"></i></a>Form Hook</h4>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">useForm</span> <span class="token operator">=</span> <span class="token parameter">callback</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>values<span class="token punctuation">,</span> setValues<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setValues</span><span class="token punctuation">(</span><span class="token parameter">values</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token operator">...</span>values<span class="token punctuation">,</span>
      <span class="token punctuation">[</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    handleChange<span class="token punctuation">,</span>
    handleSubmit<span class="token punctuation">,</span>
    values
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> useForm<span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-jsx"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useField</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token parameter">name<span class="token punctuation">,</span>
  form<span class="token punctuation">,</span>
  <span class="token punctuation">{</span> defaultValue<span class="token punctuation">,</span> validations <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fieldsToValidateOnChange <span class="token operator">=</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>defaultValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>errors<span class="token punctuation">,</span> setErrors<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>pristine<span class="token punctuation">,</span> setPristine<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>validating<span class="token punctuation">,</span> setValidating<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> validateCounter <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">validate</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> validateIteration <span class="token operator">=</span> <span class="token operator">++</span>validateCounter<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
    <span class="token function">setValidating</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> formData <span class="token operator">=</span> form<span class="token punctuation">.</span><span class="token function">getFormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> errorMessages <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>
      validations<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">validation</span> <span class="token operator">=&gt;</span> <span class="token function">validation</span><span class="token punctuation">(</span>formData<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    errorMessages <span class="token operator">=</span> errorMessages<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">errorMsg</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token operator">!</span>errorMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>validateIteration <span class="token operator">===</span> validateCounter<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this is the most recent invocation</span>
      <span class="token function">setErrors</span><span class="token punctuation">(</span>errorMessages<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setValidating</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> fieldValid <span class="token operator">=</span> errorMessages<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> fieldValid<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pristine<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// Avoid validate on mount</span>
    form<span class="token punctuation">.</span><span class="token function">validateFields</span><span class="token punctuation">(</span>fieldsToValidateOnChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> field <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">,</span>
    value<span class="token punctuation">,</span>
    errors<span class="token punctuation">,</span>
    setErrors<span class="token punctuation">,</span>
    pristine<span class="token punctuation">,</span>
    <span class="token function-variable function">onChange</span><span class="token punctuation">:</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>pristine<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setPristine</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token function">setValue</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    validate<span class="token punctuation">,</span>
    validating
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  form<span class="token punctuation">.</span><span class="token function">addField</span><span class="token punctuation">(</span>field<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> field<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useForm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> onSubmit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>submitted<span class="token punctuation">,</span> setSubmitted<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>submitting<span class="token punctuation">,</span> setSubmitting<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">validateFields</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">fieldNames</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> fieldsToValidate<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fieldNames <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      fieldsToValidate <span class="token operator">=</span> fields<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">field</span> <span class="token operator">=&gt;</span>
        fieldNames<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>field<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">//if fieldNames not provided, validate all fields</span>
      fieldsToValidate <span class="token operator">=</span> fields<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> fieldsValid <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>
      fieldsToValidate<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">field</span> <span class="token operator">=&gt;</span> field<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> formValid <span class="token operator">=</span> fieldsValid<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">isValid</span> <span class="token operator">=&gt;</span> isValid <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> formValid<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">getFormData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> fields<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">formData<span class="token punctuation">,</span> f</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      formData<span class="token punctuation">[</span>f<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> f<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
      <span class="token keyword">return</span> formData<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">onSubmit</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setSubmitting</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setSubmitted</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// User has attempted to submit form at least once</span>
      <span class="token keyword">let</span> formValid <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">validateFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> returnVal <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">onSubmit</span><span class="token punctuation">(</span><span class="token function">getFormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> formValid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setSubmitting</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> returnVal<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">isValid</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> fields<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">f</span> <span class="token operator">=&gt;</span> f<span class="token punctuation">.</span>errors<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">addField</span><span class="token punctuation">:</span> <span class="token parameter">field</span> <span class="token operator">=&gt;</span> fields<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>field<span class="token punctuation">)</span><span class="token punctuation">,</span>
    getFormData<span class="token punctuation">,</span>
    validateFields<span class="token punctuation">,</span>
    submitted<span class="token punctuation">,</span>
    submitting
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Field</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
  label<span class="token punctuation">,</span>
  name<span class="token punctuation">,</span>
  value<span class="token punctuation">,</span>
  onChange<span class="token punctuation">,</span>
  errors<span class="token punctuation">,</span>
  setErrors<span class="token punctuation">,</span>
  pristine<span class="token punctuation">,</span>
  validating<span class="token punctuation">,</span>
  validate<span class="token punctuation">,</span>
  formSubmitted<span class="token punctuation">,</span>
  <span class="token operator">...</span>other
<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> showErrors <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">!</span>pristine <span class="token operator">||</span> formSubmitted<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>errors<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormControl</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>field<span class="token punctuation">&quot;</span></span> <span class="token attr-name">error</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>showErrors<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">InputLabel</span></span> <span class="token attr-name">htmlFor</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>label<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">InputLabel</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span>
        <span class="token attr-name">id</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span>
        <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span>
        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span></span>
        <span class="token attr-name">onBlur</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>pristine <span class="token operator">&amp;&amp;</span> <span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">endAdornment</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">InputAdornment</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>end<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token punctuation">{</span>validating <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoadingIcon</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>rotate<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">InputAdornment</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">}</span></span>
        <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">other</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormHelperText</span></span> <span class="token attr-name">component</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>div<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">{</span>showErrors <span class="token operator">&amp;&amp;</span>
          errors<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">errorMsg</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>errorMsg<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>errorMsg<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">FormHelperText</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">FormControl</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">onSubmit</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">formData<span class="token punctuation">,</span> valid</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>valid<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token keyword">await</span> <span class="token function">timeout</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Simulate network time</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>formData<span class="token punctuation">.</span>username<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//Simulate 400 response from server</span>
        usernameField<span class="token punctuation">.</span><span class="token function">setErrors</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;Make a longer username&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">//Simulate 201 response from server</span>
        window<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span>
          <span class="token template-string"><span class="token string">`form valid: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>valid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, form data: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> usernameField <span class="token operator">=</span> <span class="token function">useField</span><span class="token punctuation">(</span><span class="token string">&apos;username&apos;</span><span class="token punctuation">,</span> form<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    defaultValue<span class="token punctuation">:</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">,</span>
    validations<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">async</span> <span class="token parameter">formData</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token function">timeout</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> formData<span class="token punctuation">.</span>username<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">6</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&apos;Username already exists&apos;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    fieldsToValidateOnChange<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> passwordField <span class="token operator">=</span> <span class="token function">useField</span><span class="token punctuation">(</span><span class="token string">&apos;password&apos;</span><span class="token punctuation">,</span> form<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    defaultValue<span class="token punctuation">:</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">,</span>
    validations<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token parameter">formData</span> <span class="token operator">=&gt;</span>
        formData<span class="token punctuation">.</span>password<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">6</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&apos;Password must be at least 6 characters&apos;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    fieldsToValidateOnChange<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;password&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;confirmPassword&apos;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> confirmPasswordField <span class="token operator">=</span> <span class="token function">useField</span><span class="token punctuation">(</span><span class="token string">&apos;confirmPassword&apos;</span><span class="token punctuation">,</span> form<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    defaultValue<span class="token punctuation">:</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">,</span>
    validations<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token parameter">formData</span> <span class="token operator">=&gt;</span>
        formData<span class="token punctuation">.</span>password <span class="token operator">!==</span> formData<span class="token punctuation">.</span>confirmPassword <span class="token operator">&amp;&amp;</span>
        <span class="token string">&apos;Passwords do not match&apos;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    fieldsToValidateOnChange<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;password&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;confirmPassword&apos;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> requiredFields <span class="token operator">=</span> <span class="token punctuation">[</span>usernameField<span class="token punctuation">,</span> passwordField<span class="token punctuation">,</span> confirmPasswordField<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>form-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>onSubmit<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Field</span></span>
          <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">usernameField</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">formSubmitted</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>submitted<span class="token punctuation">}</span></span>
          <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Username<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Field</span></span>
          <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">passwordField</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">formSubmitted</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>submitted<span class="token punctuation">}</span></span>
          <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Password<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Field</span></span>
          <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">confirmPasswordField</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">formSubmitted</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>form<span class="token punctuation">.</span>submitted<span class="token punctuation">}</span></span>
          <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Confirm Password<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>
          <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
            <span class="token operator">!</span>form<span class="token punctuation">.</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span>
            form<span class="token punctuation">.</span>submitting <span class="token operator">||</span>
            requiredFields<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">f</span> <span class="token operator">=&gt;</span> f<span class="token punctuation">.</span>pristine<span class="token punctuation">)</span>
          <span class="token punctuation">}</span></span>
        <span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">{</span>form<span class="token punctuation">.</span>submitting <span class="token operator">?</span> <span class="token string">&apos;Submitting&apos;</span> <span class="token punctuation">:</span> <span class="token string">&apos;Submit&apos;</span><span class="token punctuation">}</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="es6-syntax"><a name="es6-syntax" class="anchor-navigation-ex-anchor" href="#es6-syntax"><i class="fa fa-link" aria-hidden="true"></i></a>5. ES6 Syntax</h2>
<h3 id="comments"><a name="comments" class="anchor-navigation-ex-anchor" href="#comments"><i class="fa fa-link" aria-hidden="true"></i></a>5.1. Comments</h3>
<pre class="language-"><code class="lang-jsx"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">{</span><span class="token comment">/* */</span><span class="token punctuation">}</span>
  <span class="token punctuation">{</span><span class="token comment">/*

  */</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="binding-for-this"><a name="binding-for-this" class="anchor-navigation-ex-anchor" href="#binding-for-this"><i class="fa fa-link" aria-hidden="true"></i></a>5.2. binding for this</h3>
<pre class="language-"><code class="lang-js"><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>handle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">handle</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-"><code class="lang-js">state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function-variable function">handle</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="react-style-guide"><a name="react-style-guide" class="anchor-navigation-ex-anchor" href="#react-style-guide"><i class="fa fa-link" aria-hidden="true"></i></a>6. React Style Guide</h2>
<h3 id="naming-style"><a name="naming-style" class="anchor-navigation-ex-anchor" href="#naming-style"><i class="fa fa-link" aria-hidden="true"></i></a>6.1. Naming Style</h3>
<ul>
<li>use PascalCase for <code>.jsx</code> and component constructor</li>
<li>use camelCase for component instance reference</li>
<li>use camelCase for props name</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment">// bad</span>
<span class="token keyword">import</span> reservationCard <span class="token keyword">from</span> <span class="token string">&apos;./ReservationCard&apos;</span><span class="token punctuation">;</span>

<span class="token comment">// good</span>
<span class="token keyword">import</span> ReservationCard <span class="token keyword">from</span> <span class="token string">&apos;./ReservationCard&apos;</span><span class="token punctuation">;</span>

<span class="token comment">// bad</span>
<span class="token keyword">const</span> ReservationItem <span class="token operator">=</span> <span class="token operator">&lt;</span>ReservationCard <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token comment">// good</span>
<span class="token keyword">const</span> reservationItem <span class="token operator">=</span> <span class="token operator">&lt;</span>ReservationCard <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>setting displayname for HOC</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment">// bad</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">withFoo</span><span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">WithFoo</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> foo <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// good</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">withFoo</span><span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">WithFoo</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> foo <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> wrappedComponentName <span class="token operator">=</span> WrappedComponent<span class="token punctuation">.</span>displayName
    <span class="token operator">||</span> WrappedComponent<span class="token punctuation">.</span>name
    <span class="token operator">||</span> <span class="token string">&apos;Component&apos;</span><span class="token punctuation">;</span>

  WithFoo<span class="token punctuation">.</span>displayName <span class="token operator">=</span> <span class="token template-string"><span class="token string">`withFoo(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>wrappedComponentName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> WithFoo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="props-style"><a name="props-style" class="anchor-navigation-ex-anchor" href="#props-style"><i class="fa fa-link" aria-hidden="true"></i></a>6.2. Props Style</h3>
<ul>
<li>use <code>prop</code> not <code>prop={true}</code></li>
<li>filter out unnecessary props</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment">// bad</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> irrelevantProp<span class="token punctuation">,</span> <span class="token operator">...</span>relevantProps  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">{</span><span class="token operator">...</span>this<span class="token punctuation">.</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token comment">// good</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> irrelevantProp<span class="token punctuation">,</span> <span class="token operator">...</span>relevantProps  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">{</span><span class="token operator">...</span>relevantProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="refs-style"><a name="refs-style" class="anchor-navigation-ex-anchor" href="#refs-style"><i class="fa fa-link" aria-hidden="true"></i></a>6.3. Refs Style</h3>
<ul>
<li>use callback refs</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment">// bad</span>
<span class="token comment">// deprecated</span>
<span class="token operator">&lt;</span>Foo
  ref<span class="token operator">=</span><span class="token string">&quot;myRef&quot;</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// good</span>
<span class="token operator">&lt;</span>Foo
  ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>myRef <span class="token operator">=</span> ref<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<h3 id="alignment-style"><a name="alignment-style" class="anchor-navigation-ex-anchor" href="#alignment-style"><i class="fa fa-link" aria-hidden="true"></i></a>6.4. Alignment Style</h3>
<pre class="language-"><code class="lang-js"><span class="token comment">// bad</span>
<span class="token operator">&lt;</span>Foo superLongParam<span class="token operator">=</span><span class="token string">&quot;bar&quot;</span>
     anotherSuperLongParam<span class="token operator">=</span><span class="token string">&quot;baz&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// good</span>
<span class="token operator">&lt;</span>Foo
  superLongParam<span class="token operator">=</span><span class="token string">&quot;bar&quot;</span>
  anotherSuperLongParam<span class="token operator">=</span><span class="token string">&quot;baz&quot;</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// if props fit in one line then keep it on the same line</span>
<span class="token operator">&lt;</span>Foo bar<span class="token operator">=</span><span class="token string">&quot;bar&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// children get indented normally</span>
<span class="token operator">&lt;</span>Foo
  superLongParam<span class="token operator">=</span><span class="token string">&quot;bar&quot;</span>
  anotherSuperLongParam<span class="token operator">=</span><span class="token string">&quot;baz&quot;</span>
<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Quux <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Foo<span class="token operator">&gt;</span>

<span class="token comment">// bad</span>
<span class="token punctuation">{</span>showButton <span class="token operator">&amp;&amp;</span>
  <span class="token operator">&lt;</span>Button <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token comment">// bad</span>
<span class="token punctuation">{</span>
  showButton <span class="token operator">&amp;&amp;</span>
    <span class="token operator">&lt;</span>Button <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token comment">// good</span>
<span class="token punctuation">{</span>showButton <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Button <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment">// good</span>
<span class="token punctuation">{</span>showButton <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>Button <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
</code></pre>
<h3 id="quotes-style"><a name="quotes-style" class="anchor-navigation-ex-anchor" href="#quotes-style"><i class="fa fa-link" aria-hidden="true"></i></a>6.5. Quotes Style</h3>
<ul>
<li>use <code>&quot;</code> for JSX attributes, use <code>&apos;</code> for all other JS</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment">// bad</span>
<span class="token operator">&lt;</span>Foo bar<span class="token operator">=</span><span class="token string">&apos;bar&apos;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// good</span>
<span class="token operator">&lt;</span>Foo bar<span class="token operator">=</span><span class="token string">&quot;bar&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// bad</span>
<span class="token operator">&lt;</span>Foo style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> left<span class="token punctuation">:</span> <span class="token string">&quot;20px&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// good</span>
<span class="token operator">&lt;</span>Foo style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> left<span class="token punctuation">:</span> <span class="token string">&apos;20px&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<h3 id="spacing-style"><a name="spacing-style" class="anchor-navigation-ex-anchor" href="#spacing-style"><i class="fa fa-link" aria-hidden="true"></i></a>6.6. Spacing Style</h3>
<ul>
<li>a single space in self-closing tag</li>
<li>no pad JSX curly spaces</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment">// bad</span>
<span class="token operator">&lt;</span>Foo<span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// very bad</span>
<span class="token operator">&lt;</span>Foo                 <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// bad</span>
<span class="token operator">&lt;</span>Foo
 <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// good</span>
<span class="token operator">&lt;</span>Foo <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token comment">// bad</span>
<span class="token operator">&lt;</span>Foo bar<span class="token operator">=</span><span class="token punctuation">{</span> baz <span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// good</span>
<span class="token operator">&lt;</span>Foo bar<span class="token operator">=</span><span class="token punctuation">{</span>baz<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<h3 id="ordering-of-class-component"><a name="ordering-of-class-component" class="anchor-navigation-ex-anchor" href="#ordering-of-class-component"><i class="fa fa-link" aria-hidden="true"></i></a>6.7. Ordering of Class Component</h3>
<ol>
<li>optional static methods</li>
<li>constructor</li>
<li>getChildContext</li>
<li>getDerivedStateFromProps</li>
<li>componentDidMount</li>
<li>getDerivedStateFromProps</li>
<li>shouldComponentUpdate</li>
<li>getSnapshotBeforeUpdate</li>
<li>componentDidUpdate</li>
<li>componentWillUnmount</li>
<li>clickHandlers or eventHandlers like onClickSubmit() or onChangeDescription()</li>
<li>getter methods for render like getSelectReason() or getFooterContent()</li>
<li>optional render methods like renderNavigation() or renderProfilePicture()</li>
<li>render</li>
</ol>
<h2 id="mvcmvvm"><a name="mvcmvvm" class="anchor-navigation-ex-anchor" href="#mvcmvvm"><i class="fa fa-link" aria-hidden="true"></i></a>7. MVC/MVVM</h2>
<h3 id="controller"><a name="controller" class="anchor-navigation-ex-anchor" href="#controller"><i class="fa fa-link" aria-hidden="true"></i></a>7.1. Controller</h3>
<ul>
<li>&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x7684;&#x53C2;&#x6570;</li>
<li>&#x6E32;&#x67D3;&#x548C;&#x91CD;&#x5B9A;&#x5411;</li>
<li>&#x9009;&#x62E9; Model &#x548C; Service</li>
<li>&#x5904;&#x7406; Session &#x548C; Cookies</li>
</ul>
<h3 id="comparsion"><a name="comparsion" class="anchor-navigation-ex-anchor" href="#comparsion"><i class="fa fa-link" aria-hidden="true"></i></a>7.2. Comparsion</h3>
<ul>
<li>&#x521D;&#x59CB;&#x6E32;&#x67D3;: Virtual DOM &gt; &#x810F;&#x68C0;&#x67E5; &gt;= &#x4F9D;&#x8D56;&#x6536;&#x96C6;</li>
<li>&#x5C0F;&#x91CF;&#x6570;&#x636E;&#x66F4;&#x65B0;: &#x4F9D;&#x8D56;&#x6536;&#x96C6; &gt;&gt; Virtual DOM + &#x4F18;&#x5316; &gt; &#x810F;&#x68C0;&#x67E5;&#xFF08;&#x65E0;&#x6CD5;&#x4F18;&#x5316;&#xFF09; &gt; Virtual DOM &#x65E0;&#x4F18;&#x5316;</li>
<li>&#x5927;&#x91CF;&#x6570;&#x636E;&#x66F4;&#x65B0;: &#x810F;&#x68C0;&#x67E5; + &#x4F18;&#x5316; &gt;= &#x4F9D;&#x8D56;&#x6536;&#x96C6; + &#x4F18;&#x5316; &gt; Virtual DOM&#xFF08;&#x65E0;&#x6CD5;/&#x65E0;&#x9700;&#x4F18;&#x5316;&#xFF09;&gt;&gt; MVVM &#x65E0;&#x4F18;&#x5316;</li>
</ul>
<h3 id="best-practice"><a name="best-practice" class="anchor-navigation-ex-anchor" href="#best-practice"><i class="fa fa-link" aria-hidden="true"></i></a>7.3. Best Practice</h3>
<ul>
<li>&#x7EC4;&#x4EF6;&#x7EC6;&#x5206;&#x5316;</li>
<li>&#x7EC4;&#x4EF6;<ul>
<li>&#x53EA;&#x4F20;&#x5165;&#x5FC5;&#x8981;&#x7684; props</li>
<li>&#x4F7F;&#x7528; immutablejs &#x6216;&#x8005; react.addons.update &#x5B9E;&#x73B0;&#x4E0D;&#x53EF;&#x53D8;&#x6570;&#x636E;&#x7ED3;&#x6784;</li>
<li>&#x7ED3;&#x5408; React.addons.PureRenderMixin &#x6765;&#x51CF;&#x5C11; reRender</li>
</ul>
</li>
<li>&#x5728; shouldComponentUpdate &#x4E2D;&#x4F18;&#x5316;&#x7EC4;&#x4EF6;&#x51CF;&#x5C11; reRender</li>
<li>&#x4F7F;&#x7528; context</li>
<li>&#x5C11;&#x505A; dom &#x64CD;&#x4F5C;&#xFF0C;&#x59CB;&#x7EC8;&#x8BA9; UI &#x80FD;&#x591F;&#x57FA;&#x4E8E; State &#x8FD8;&#x539F;</li>
<li>&#x5728; store &#x548C; action &#x4E2D;&#x4E0D; dom &#x64CD;&#x4F5C;&#x6216;&#x8005;&#x8BBF;&#x95EE; window.&#x5C5E;&#x6027;&#xFF0C;&#x53EA;&#x4E0E;&#x6570;&#x636E;&#x6253;&#x4EA4;&#x9053;</li>
<li>&#x63A8;&#x8350;&#x4F7F;&#x7528; ES6</li>
<li>npm &#x7684; debug &#x5305;&#xFF0C;log &#x7EC4;&#x4EF6;&#x6E32;&#x67D3;&#x7684;&#x6BCF;&#x4E2A;&#x6B65;&#x9AA4;&#x548C;&#x52A8;&#x4F5C;</li>
<li><a href="https://github.com/diegohaz/singel" target="_blank">Singel</a></li>
</ul>
<h2 id="modern-react"><a name="modern-react" class="anchor-navigation-ex-anchor" href="#modern-react"><i class="fa fa-link" aria-hidden="true"></i></a>8. Modern React</h2>
<h3 id="lazy-and-suspense"><a name="lazy-and-suspense" class="anchor-navigation-ex-anchor" href="#lazy-and-suspense"><i class="fa fa-link" aria-hidden="true"></i></a>8.1. Lazy and Suspense</h3>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> lazy<span class="token punctuation">,</span> Suspense <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Product <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&apos;./ProductHandler&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;product-list&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>My Awesome Product<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Product list is loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Take a look at my product<span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>section<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Product id<span class="token operator">=</span><span class="token string">&quot;PDT-49-232&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Product id<span class="token operator">=</span><span class="token string">&quot;PDT-50-233&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Product id<span class="token operator">=</span><span class="token string">&quot;PDT-51-234&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> lazy<span class="token punctuation">,</span> Suspense <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">;</span>

<span class="token keyword">const</span> Lazy <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function-variable function">default</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>Resource <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Resource</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;box&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Lazy<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>This component loaded after <span class="token number">4</span> seconds<span class="token punctuation">,</span> using React Lazy and Suspense<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Lazy <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&apos;root&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="context-api"><a name="context-api" class="anchor-navigation-ex-anchor" href="#context-api"><i class="fa fa-link" aria-hidden="true"></i></a>8.2. Context API</h3>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">contextWrapper</span><span class="token punctuation">(</span><span class="token parameter">WrappedComponent<span class="token punctuation">,</span> Context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> React<span class="token punctuation">.</span>Component <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>Context<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token parameter">context</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>WrappedComponent context<span class="token operator">=</span><span class="token punctuation">{</span>context<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>this<span class="token punctuation">.</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Context<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="ref-with-context"><a name="ref-with-context" class="anchor-navigation-ex-anchor" href="#ref-with-context"><i class="fa fa-link" aria-hidden="true"></i></a><a name="ref-with-context" class="plugin-anchor" href="#ref-with-context"><i class="fa fa-link" aria-hidden="true"></i></a>Ref with Context</h4>
<pre class="language-"><code class="lang-js"><span class="token comment">// Context.js</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> createContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>

<span class="token comment">// React team &#x2014; thanks for Context API &#x1F44D;</span>
<span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Provider<span class="token punctuation">:</span> ContextProvider<span class="token punctuation">,</span> Consumer <span class="token punctuation">}</span> <span class="token operator">=</span> context<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Provider</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// refs</span>
  <span class="token comment">// usage: this.textareaRef.current</span>
  textareaRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// input handler</span>
  <span class="token function-variable function">onInput</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">:</span> value
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>ContextProvider
        value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          textareaRef<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>textareaRef<span class="token punctuation">,</span>
          onInput<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onInput
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ContextProvider<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token comment">// TextArea.jsx</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Consumer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;./Context&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">TextArea</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Consumer<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token parameter">context</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>textarea
        ref<span class="token operator">=</span><span class="token punctuation">{</span>context<span class="token punctuation">.</span>textareaRef<span class="token punctuation">}</span>
        className<span class="token operator">=</span><span class="token string">&quot;app__textarea&quot;</span>
        name<span class="token operator">=</span><span class="token string">&quot;snippet&quot;</span>
        placeholder<span class="token operator">=</span><span class="token string">&quot;Your snippet&#x2026;&quot;</span>
        onChange<span class="token operator">=</span><span class="token punctuation">{</span>context<span class="token punctuation">.</span>onInput<span class="token punctuation">}</span>
        autoComplete<span class="token operator">=</span><span class="token string">&quot;off&quot;</span>
        autoCorrect<span class="token operator">=</span><span class="token string">&quot;off&quot;</span>
        autoCapitalize<span class="token operator">=</span><span class="token string">&quot;off&quot;</span>
        spellCheck<span class="token operator">=</span><span class="token string">&quot;false&quot;</span>
        wrap<span class="token operator">=</span><span class="token string">&quot;off&quot;</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Consumer<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="error-boundary"><a name="error-boundary" class="anchor-navigation-ex-anchor" href="#error-boundary"><i class="fa fa-link" aria-hidden="true"></i></a>8.3. Error Boundary</h3>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x9519;&#x8BEF;&#x8FB9;&#x754C;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#x7684;&#x60C5;&#x51B5;:</p>
<ul>
<li>&#x5728;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x5668;&#x5185;</li>
<li>setTimeout &#x6216; requestAnimationFrame &#x56DE;&#x8C03;&#x4E2D;&#x7684;&#x5F02;&#x6B65;&#x4EE3;&#x7801;</li>
<li>&#x5728;&#x670D;&#x52A1;&#x7AEF;&#x6E32;&#x67D3;&#x671F;&#x95F4;</li>
<li>&#x9519;&#x8BEF;&#x8FB9;&#x754C;&#x4EE3;&#x7801;&#x672C;&#x8EAB;&#x4E2D;&#x5F15;&#x53D1;&#x9519;&#x8BEF;&#x65F6;</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">class</span> <span class="token class-name">ErrorBoundary</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    hasError<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    error<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    info<span class="token punctuation">:</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// key point</span>
  <span class="token function">componentDidCatch</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      hasError<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      error<span class="token punctuation">:</span> error<span class="token punctuation">,</span>
      info<span class="token punctuation">:</span> info
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hasError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Oops<span class="token punctuation">,</span> something went wrong <span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>The error<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>error<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Where it occured<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>info<span class="token punctuation">.</span>componentStack<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="reactfragmentarray-components"><a name="reactfragmentarray-components" class="anchor-navigation-ex-anchor" href="#reactfragmentarray-components"><i class="fa fa-link" aria-hidden="true"></i></a>8.4. React.Fragment/Array Components</h3>
<pre class="language-"><code class="lang-js"><span class="token keyword">class</span> <span class="token class-name">Items</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Fruit <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Beverages <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Drinks <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Fruit</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Apple<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Orange<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Blueberry<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Cherry<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Frameworks</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token punctuation">[</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>JavaScript<span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>React<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Vuejs<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Angular<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="portals"><a name="portals" class="anchor-navigation-ex-anchor" href="#portals"><i class="fa fa-link" aria-hidden="true"></i></a>9. Portals</h2>
<p>Portals provide a first-class way to render children into a DOM node
that exists <strong>outside</strong> the DOM hierarchy of the parent component
<code>ReactDOM.createPortal(child, container)</code>.</p>
<pre class="language-"><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>portal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> portalRoot <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;portal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Portal</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">componentDidMount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    portalRoot<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">componentWillUnmount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    portalRoot<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> children <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createPortal</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Modal</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> children<span class="token punctuation">,</span> toggle<span class="token punctuation">,</span> on <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Portal<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>on <span class="token operator">?</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;modal is-active&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;modal-background&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;modal-content&quot;</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;box&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h2 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;subtitle&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>toggle<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">&quot;closeButton button is-info&quot;</span><span class="token operator">&gt;</span>
                  Close
                <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Portal<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    showModal<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">toggleModal</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      showModal<span class="token punctuation">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>showModal
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> showModal <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;box&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;subtitle&quot;</span><span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token constant">I</span> am the parent<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>toggleModal<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">&quot;button is-black&quot;</span><span class="token operator">&gt;</span>
          Toggle Modal
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Modal on<span class="token operator">=</span><span class="token punctuation">{</span>showModal<span class="token punctuation">}</span> toggle<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>toggleModal<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>showModal <span class="token operator">?</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token constant">I</span> am the portal<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span> <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Modal<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="react-performance"><a name="react-performance" class="anchor-navigation-ex-anchor" href="#react-performance"><i class="fa fa-link" aria-hidden="true"></i></a>10. React Performance</h2>
<ul>
<li>use <code>key</code> correctly</li>
<li><code>shouldComponentUpdate</code></li>
<li><code>React.PureComponent</code></li>
<li><code>React.memo</code></li>
<li>stateless component</li>
<li>Immutable.js</li>
<li>Isomorphic rendering</li>
<li>Webpack bundle analyzer</li>
<li><a href="https://houssein.me/progressive-react" target="_blank">Progressive React</a></li>
</ul>
<h3 id="rerendering-problem"><a name="rerendering-problem" class="anchor-navigation-ex-anchor" href="#rerendering-problem"><i class="fa fa-link" aria-hidden="true"></i></a>10.1. Rerendering Problem</h3>
<p>The major difference is that
React.Component doesn&#x2019;t implement the shouldComponentUpdate() lifecycle method
while React.PureComponent implements it.
If component&apos;s render() function renders the same result
given the same props and state,
use React.PureComponent/React.memo for a performance boost in some cases.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Unstable</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos; Rendered Unstable component &apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Unstable value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Unstable <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos; Rendered this component &apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Unstable value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre>
<p>prevent useless re-rendering:</p>
<ul>
<li>shouldComponentUpdate</li>
<li>React.PureComponent</li>
<li>React.memo</li>
<li>memorized values</li>
<li>memorized event handlers</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token comment">// BAD</span>
<span class="token keyword">function</span> <span class="token function">App</span> <span class="token punctuation">(</span><span class="token parameter">items</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>BigListComponent
      style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>width<span class="token punctuation">:</span> <span class="token string">&apos;100%&apos;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
      items<span class="token operator">=</span><span class="token punctuation">{</span>items<span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// GOOD</span>
<span class="token keyword">const</span> bigListStyle <span class="token operator">=</span> <span class="token punctuation">{</span> width<span class="token punctuation">:</span> <span class="token string">&apos;100%&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span> <span class="token punctuation">(</span><span class="token parameter">items</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>BigListComponent
      style<span class="token operator">=</span><span class="token punctuation">{</span>bigListStyle<span class="token punctuation">}</span>
      items<span class="token operator">=</span><span class="token punctuation">{</span>items<span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token comment">// BAD: Inline function</span>
<span class="token keyword">function</span> <span class="token function">App</span> <span class="token punctuation">(</span><span class="token parameter">items</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>BigListComponent
      onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// GOOD: Reference to a function</span>
<span class="token keyword">const</span> <span class="token function-variable function">clickHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span> <span class="token punctuation">(</span><span class="token parameter">items</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>BigListComponent
      onClick<span class="token operator">=</span><span class="token punctuation">{</span>clickHandler<span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="code-spliting"><a name="code-spliting" class="anchor-navigation-ex-anchor" href="#code-spliting"><i class="fa fa-link" aria-hidden="true"></i></a>10.2. Code Spliting</h3>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Formik <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;formik&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Yup <span class="token keyword">from</span> <span class="token string">&apos;yup&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> formValidator <span class="token operator">=</span> Yup<span class="token punctuation">.</span><span class="token function">object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">shape</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Form</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Formik validationSchema<span class="token operator">=</span><span class="token punctuation">{</span>formValidator<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Formik<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      Form<span class="token punctuation">:</span> <span class="token keyword">undefined</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> Form <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>Form <span class="token operator">?</span> <span class="token operator">&lt;</span>Form <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">:</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showForm<span class="token punctuation">}</span><span class="token operator">&gt;</span>Show form<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">showForm</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> Form <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&apos;./Form&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> Form <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="server-side-rendering"><a name="server-side-rendering" class="anchor-navigation-ex-anchor" href="#server-side-rendering"><i class="fa fa-link" aria-hidden="true"></i></a>11. Server Side Rendering</h2>
<p>Application code is written in a way that
it can be executed <strong>both on the server and on the client</strong>.
The browser displays the initial HTML (fetch from server),
simultaneously downloads the single-page app (SPA) in the background.
Once the client-side code is ready,
the client takes over and the website becomes a SPA.</p>
<p>&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;&#x662F;&#x4E00;&#x79CD;&#x8FDB;&#x6B65;&#xFF0C;&#x4F46;&#x5F7B;&#x5E95;&#x7684;&#x5206;&#x79BB;&#xFF0C;&#x4E5F;&#x4E0D;&#x5C3D;&#x5584;&#x5C3D;&#x7F8E;&#xFF0C;
&#x6BD4;&#x5982;&#x4F1A;&#x6709;&#x9996;&#x5C4F;&#x52A0;&#x8F7D;&#x901F;&#x5EA6;&#x548C; SEO &#x65B9;&#x9762;&#x7684;&#x56F0;&#x6270;&#x3002;
&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;+&#x670D;&#x52A1;&#x7AEF;&#x9996;&#x5C4F;&#x6E32;&#x67D3;&#x770B;&#x8D77;&#x6765;&#x662F;&#x4E2A;&#x66F4;&#x4F18;&#x7684;&#x65B9;&#x6848;&#xFF0C;
&#x5B83;&#x7ED3;&#x5408;&#x4E86;&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;&#x548C;&#x670D;&#x52A1;&#x7AEF;&#x6E32;&#x67D3;&#x4E24;&#x8005;&#x7684;&#x4F18;&#x70B9;&#xFF0C;
&#x65E2;&#x505A;&#x5230;&#x4E86;&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;&#xFF0C;&#x53C8;&#x80FD;&#x4FDD;&#x8BC1;&#x9996;&#x9875;&#x6E32;&#x67D3;&#x901F;&#x5EA6;&#xFF0C;&#x8FD8;&#x6709;&#x5229;&#x4E8E; SEO&#x3002;</p>
<h3 id="pros-of-ssr"><a name="pros-of-ssr" class="anchor-navigation-ex-anchor" href="#pros-of-ssr"><i class="fa fa-link" aria-hidden="true"></i></a>11.1. Pros of SSR</h3>
<h4 id="performance"><a name="performance" class="anchor-navigation-ex-anchor" href="#performance"><i class="fa fa-link" aria-hidden="true"></i></a><a name="performance" class="plugin-anchor" href="#performance"><i class="fa fa-link" aria-hidden="true"></i></a>Performance</h4>
<ul>
<li>Smaller first meaningful paint time</li>
<li>HTML&apos;s strengths: progressive rendering</li>
<li>Browsers are incredibly good at rendering partial content</li>
</ul>
<h4 id="seo"><a name="seo" class="anchor-navigation-ex-anchor" href="#seo"><i class="fa fa-link" aria-hidden="true"></i></a><a name="seo" class="plugin-anchor" href="#seo"><i class="fa fa-link" aria-hidden="true"></i></a>SEO</h4>
<ul>
<li>Search engine crawlers used to not execute scripts (or initial scripts)</li>
<li>Search engine usually stop after a while (roughly 10 seconds)</li>
<li>SPAs can&apos;t set meaningful HTTP status codes</li>
</ul>
<h4 id="awesome-library"><a name="awesome-library" class="anchor-navigation-ex-anchor" href="#awesome-library"><i class="fa fa-link" aria-hidden="true"></i></a><a name="awesome-library" class="plugin-anchor" href="#awesome-library"><i class="fa fa-link" aria-hidden="true"></i></a>Awesome Library</h4>
<ul>
<li><a href="https://nextjs.org" target="_blank">Next.js for Isomorphic rendering</a></li>
</ul>
<h3 id="basic-example"><a name="basic-example" class="anchor-navigation-ex-anchor" href="#basic-example"><i class="fa fa-link" aria-hidden="true"></i></a>11.2. Basic Example</h3>
<p><a href="http://peerigon.github.io/talks/2018-07-20-js-camp-barcelona-bumpy-road-universal-javascript/#1" target="_blank">presentation</a></p>
<p>webpack config</p>
<pre class="language-"><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span>
  webConfig<span class="token punctuation">,</span>
  nodeConfig<span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> webConfig <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token operator">...</span>baseConfig<span class="token punctuation">,</span>
  target<span class="token punctuation">:</span> <span class="token string">&apos;web&apos;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> nodeConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>baseConfig<span class="token punctuation">,</span>
  target<span class="token punctuation">:</span> <span class="token string">&apos;node&apos;</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>baseConfig<span class="token punctuation">.</span>output<span class="token punctuation">,</span>
    libraryTarget<span class="token punctuation">:</span> <span class="token string">&apos;commonjs2&apos;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  externals<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;webpack-node-externals&apos;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>start.server.js</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOMServer <span class="token keyword">from</span> <span class="token string">&quot;react-dom/server&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&apos;./App.js&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token function">deafult</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ReactDOMServer<span class="token punctuation">.</span><span class="token function">renderToString</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>index.html.js</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> startApp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;../dist/server.js&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>default<span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> `<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
  <span class="token operator">...</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>$<span class="token punctuation">{</span><span class="token function">startApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;/static/client.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre>
<p>start.client.js</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOMServer <span class="token keyword">from</span> <span class="token string">&apos;react-dom&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&apos;./App.js&apos;</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">hydrate</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&apos;app&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>async fetch out of <code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>App</span> <span class="token punctuation">/&gt;</span></span></code></li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token operator">&lt;</span>App <span class="token punctuation">{</span><span class="token operator">...</span>data<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token keyword">return</span> <span class="token punctuation">{</span>
  html<span class="token punctuation">:</span> ReactDOMServer<span class="token punctuation">.</span><span class="token function">renderToString</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
  state<span class="token punctuation">:</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="internationalization"><a name="internationalization" class="anchor-navigation-ex-anchor" href="#internationalization"><i class="fa fa-link" aria-hidden="true"></i></a>11.3. Internationalization</h3>
<ul>
<li><a href="https://github.com/alibaba/react-intl-universal" target="_blank">react-intl</a></li>
</ul>
<h4 id="simple-intl"><a name="simple-intl" class="anchor-navigation-ex-anchor" href="#simple-intl"><i class="fa fa-link" aria-hidden="true"></i></a><a name="simple-intl" class="plugin-anchor" href="#simple-intl"><i class="fa fa-link" aria-hidden="true"></i></a>Simple Intl</h4>
<pre class="language-"><code class="lang-js"><span class="token comment">// locale/zh.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
   hello<span class="token punctuation">:</span> <span class="token string">&apos;&#x4F60;&#x597D;&#xFF0C;{name}&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// locale/en.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
   hello<span class="token punctuation">:</span> <span class="token string">&apos;Hello&#xFF0C;{name}&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> IntlMessageFormat <span class="token keyword">from</span> <span class="token string">&apos;intl-messageformat&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> zh <span class="token keyword">from</span> <span class="token string">&apos;../locale/zh&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> en <span class="token keyword">from</span> <span class="token string">&apos;../locale/en&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">MESSAGES</span> <span class="token operator">=</span> <span class="token punctuation">{</span> en<span class="token punctuation">,</span> zh <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">LOCALE</span> <span class="token operator">=</span> <span class="token string">&apos;en&apos;</span><span class="token punctuation">;</span> <span class="token comment">// &#x8FD9;&#x91CC;&#x5199;&#x4E0A;&#x51B3;&#x5B9A;&#x8BED;&#x8A00;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F8B;&#x5982;&#x53EF;&#x4EE5;&#x4ECE; cookie &#x5224;&#x65AD;&#x8BED;&#x8A00;</span>

<span class="token keyword">class</span> <span class="token class-name">Intl</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> defaultMessage<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token constant">MESSAGES</span><span class="token punctuation">[</span><span class="token constant">LOCALE</span><span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>defaultMessage <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> defaultMessage<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> key<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntlMessageFormat</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token constant">LOCALE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> msg<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Intl<span class="token punctuation">;</span>
</code></pre>
<h2 id="testing"><a name="testing" class="anchor-navigation-ex-anchor" href="#testing"><i class="fa fa-link" aria-hidden="true"></i></a>12. Testing</h2>
<ul>
<li><a href="https://www.robinwieruch.de/react-testing-tutorial/#react-enzyme-test-setup" target="_blank">Complete Tutorial</a></li>
<li><a href="https://medium.com/codeclan/testing-react-with-jest-and-enzyme-20505fec4675" target="_blank">Jest and Enzyme Snapshots Testing</a></li>
<li><a href="https://www.cypress.io/" target="_blank">Cypress - Testing Framework</a></li>
</ul>
<h3 id="shallow-renderer"><a name="shallow-renderer" class="anchor-navigation-ex-anchor" href="#shallow-renderer"><i class="fa fa-link" aria-hidden="true"></i></a>12.1. Shallow Renderer</h3>
<p>&#x6D45;&#x5C42;&#x6E32;&#x67D3; (Shallow Renderer) &#x5BF9;&#x4E8E;&#x5728; React &#x4E2D;&#x7F16;&#x5199;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x5F88;&#x6709;&#x7528;.
&#x5B83;&#x5141;&#x8BB8;&#x6E32;&#x67D3;&#x4E00;&#x4E2A;&#x4E00;&#x7EA7;&#x6DF1;&#x7684;&#x7EC4;&#x4EF6;&#x5E76;&#x65AD;&#x8A00;&#x5176;&#x6E32;&#x67D3;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x7684;&#x5185;&#x5BB9;, &#x800C;&#x4E0D;&#x5FC5;&#x62C5;&#x5FC3;&#x5B50;&#x7EC4;&#x4EF6;&#x672A;&#x5B9E;&#x4F8B;&#x5316;&#x6216;&#x6E32;&#x67D3;.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&apos;heading&apos;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token string">&apos;Title&apos;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&apos;description&apos;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token string">&apos;Description&apos;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> ShallowRenderer <span class="token keyword">from</span> <span class="token string">&apos;react-test-renderer/shallow&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShallowRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>MyComponent <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> renderer<span class="token punctuation">.</span><span class="token function">getRenderOutput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&apos;div&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&apos;heading&apos;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token string">&apos;Title&apos;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&apos;description&apos;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token string">&apos;Description&apos;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="test-renderer"><a name="test-renderer" class="anchor-navigation-ex-anchor" href="#test-renderer"><i class="fa fa-link" aria-hidden="true"></i></a>12.2. Test Renderer</h3>
<p>&#x6D4B;&#x8BD5;&#x6E32;&#x67D3;&#x5668; (Test Renderer) &#x53EF;&#x7528;&#x4E8E;&#x5C06;&#x7EC4;&#x4EF6;&#x6E32;&#x67D3;&#x4E3A;&#x7EAF; JavaScript &#x5BF9;&#x8C61;,
&#x800C;&#x4E0D;&#x4F9D;&#x8D56;&#x4E8E; DOM &#x6216;&#x539F;&#x751F;&#x79FB;&#x52A8;&#x73AF;&#x5883;.
&#x8BE5;&#x5305;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x83B7;&#x53D6;&#x7531; ReactDOM &#x6216; React Native &#x5E73;&#x53F0;&#x6240;&#x6E32;&#x67D3;&#x7684;&#x89C6;&#x56FE;&#x5C42;&#x6B21;&#x7ED3;&#x6784; (&#x7C7B;&#x4F3C;&#x4E8E; DOM &#x6811;) &#x7684;&#x5FEB;&#x7167;,
&#x800C;&#x65E0;&#x9700;&#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x6216; jsdom.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> TestRenderer <span class="token keyword">from</span> <span class="token string">&apos;react-test-renderer&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Link</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> page<span class="token punctuation">,</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span>page<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> testRenderer <span class="token operator">=</span> TestRenderer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Link page<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&apos;https://www.facebook.com/&apos;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token string">&apos;Facebook&apos;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>testRenderer<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// {</span>
<span class="token comment">//   type: &apos;a&apos;,</span>
<span class="token comment">//   props: { href: &apos;https://www.facebook.com/&apos; },</span>
<span class="token comment">//   children: [ &apos;Facebook&apos; ]</span>
<span class="token comment">// }</span>
</code></pre>
<h3 id="enzyme"><a name="enzyme" class="anchor-navigation-ex-anchor" href="#enzyme"><i class="fa fa-link" aria-hidden="true"></i></a>12.3. Enzyme</h3>
<pre class="language-"><code class="lang-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev enzyme enzyme-adapter-react-16
</code></pre>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> configure<span class="token punctuation">,</span> shallow <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;enzyme&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Adapter <span class="token keyword">from</span> <span class="token string">&apos;enzyme-adapter-react-16&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DataTable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;./components&apos;</span><span class="token punctuation">;</span>

<span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">{</span> adapter<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Adapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&apos;renders in table rows based on provided columns&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> cols <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> header<span class="token punctuation">:</span> <span class="token string">&apos;ID&apos;</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">&apos;id&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> header<span class="token punctuation">:</span> <span class="token string">&apos;Name&apos;</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">&apos;name&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> header<span class="token punctuation">:</span> <span class="token string">&apos;Email&apos;</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">&apos;email&apos;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">&apos;John&apos;</span><span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token string">&apos;john@example.com&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">&apos;Liam&apos;</span><span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token string">&apos;liam@example.com&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">&apos;Maya&apos;</span><span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token string">&apos;maya@example.com&apos;</span><span class="token punctuation">,</span> someTest<span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        id<span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span> <span class="token string">&apos;Oliver&apos;</span><span class="token punctuation">,</span>
        email<span class="token punctuation">:</span> <span class="token string">&apos;oliver@example.com&apos;</span><span class="token punctuation">,</span>
        hello<span class="token punctuation">:</span> <span class="token string">&apos;hello world&apos;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">&apos;Amelia&apos;</span><span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token string">&apos;amelia@example.com&apos;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">// Shallow render Data Table</span>
    <span class="token keyword">const</span> container <span class="token operator">=</span> <span class="token function">shallow</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>DataTable data<span class="token operator">=</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span> cols<span class="token operator">=</span><span class="token punctuation">{</span>cols<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// There should be ONLY 1 table element</span>
    <span class="token keyword">const</span> table <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&apos;table&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveLength</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// The table should have ONLY 1 thead element</span>
    <span class="token keyword">const</span> thead <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&apos;thead&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>thead<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveLength</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// The number of th tags should be equal to number of columns</span>
    <span class="token keyword">const</span> headers <span class="token operator">=</span> thead<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&apos;th&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>headers<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveLength</span><span class="token punctuation">(</span>cols<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Each th tag text should equal to column header</span>
    headers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">th<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>th<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>cols<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">.</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// The table should have ONLY 1 tbody tag</span>
    <span class="token keyword">const</span> tbody <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&apos;tbody&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>tbody<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveLength</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// tbody tag should have the same number of tr tags as data rows</span>
    <span class="token keyword">const</span> rows <span class="token operator">=</span> tbody<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&apos;tr&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>rows<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveLength</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Loop through each row and check the content</span>
    rows<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tr<span class="token punctuation">,</span> rowIndex</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> cells <span class="token operator">=</span> tr<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&apos;td&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>cells<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveLength</span><span class="token punctuation">(</span>cols<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>cells<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>rowIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>cells<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>rowIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>cells<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>rowIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="create-react-app"><a name="create-react-app" class="anchor-navigation-ex-anchor" href="#create-react-app"><i class="fa fa-link" aria-hidden="true"></i></a>13. Create React App</h2>
<ul>
<li><a href="https://auth0.com/blog/how-to-configure-create-react-app/" target="_blank">Custom React Scripts</a></li>
</ul>
<pre class="language-"><code class="lang-js">npx create<span class="token operator">-</span>react<span class="token operator">-</span>app app<span class="token operator">-</span>name <span class="token operator">--</span>scripts<span class="token operator">-</span>version @sabertazimi<span class="token operator">/</span>react<span class="token operator">-</span>scripts <span class="token operator">--</span>use<span class="token operator">-</span>npm
npm init react<span class="token operator">-</span>app app<span class="token operator">-</span>name <span class="token operator">--</span>scripts<span class="token operator">-</span>version @sabertazimi<span class="token operator">/</span>react<span class="token operator">-</span>scripts <span class="token operator">--</span>use<span class="token operator">-</span>npm
</code></pre>
<h3 id="react-scripts"><a name="react-scripts" class="anchor-navigation-ex-anchor" href="#react-scripts"><i class="fa fa-link" aria-hidden="true"></i></a>13.1. React Scripts</h3>
<ul>
<li>HTML/CSS/JSX boilerplate in <code>template/</code> directory</li>
<li>config in <code>config/</code> directory</li>
</ul>
<h3 id="deployment"><a name="deployment" class="anchor-navigation-ex-anchor" href="#deployment"><i class="fa fa-link" aria-hidden="true"></i></a>13.2. Deployment</h3>
<ul>
<li><a href="https://facebook.github.io/create-react-app/docs/deployment" target="_blank">Offical Documentation</a></li>
<li><a href="https://medium.com/@svinkle/how-to-deploy-a-react-app-to-a-subdirectory-f694d46427c1" target="_blank">Deploy Subdirectory</a></li>
</ul>
<h2 id="styled-component"><a name="styled-component" class="anchor-navigation-ex-anchor" href="#styled-component"><i class="fa fa-link" aria-hidden="true"></i></a>14. Styled Component</h2>
<h3 id="basic-usage"><a name="basic-usage" class="anchor-navigation-ex-anchor" href="#basic-usage"><i class="fa fa-link" aria-hidden="true"></i></a>14.1. Basic Usage</h3>
<h4 id="shared-css-styles"><a name="shared-css-styles" class="anchor-navigation-ex-anchor" href="#shared-css-styles"><i class="fa fa-link" aria-hidden="true"></i></a><a name="shared-css-styles" class="plugin-anchor" href="#shared-css-styles"><i class="fa fa-link" aria-hidden="true"></i></a>Shared CSS Styles</h4>
<pre class="language-"><code class="lang-js"><span class="token comment">// Import React.js, styled-components and css</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styled<span class="token punctuation">,</span> <span class="token punctuation">{</span> css <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;styled-components&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&apos;.container&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Define new const with bold style</span>
<span class="token keyword">const</span> headingStyle <span class="token operator">=</span> css<span class="token template-string"><span class="token string">`
  font-weight: bold;
`</span></span><span class="token punctuation">;</span>

<span class="token comment">// Define typography styles</span>
<span class="token keyword">const</span> <span class="token constant">H1</span> <span class="token operator">=</span> styled<span class="token punctuation">.</span>h1<span class="token template-string"><span class="token string">`
  font-size: 54px;
  // Using headingStyle const
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>headingStyle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
`</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">H2</span> <span class="token operator">=</span> styled<span class="token punctuation">.</span>h2<span class="token template-string"><span class="token string">`
  font-size: 36px;
  // Using headingStyle const
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>headingStyle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
`</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">H3</span> <span class="token operator">=</span> styled<span class="token punctuation">.</span>h3<span class="token template-string"><span class="token string">`
  font-size: 24px;
  // Using headingStyle const
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>headingStyle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
`</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">H4</span> <span class="token operator">=</span> styled<span class="token punctuation">.</span>h4<span class="token template-string"><span class="token string">`
  font-size: 16px;
  // Using headingStyle const
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>headingStyle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
`</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">H5</span> <span class="token operator">=</span> styled<span class="token punctuation">.</span>h5<span class="token template-string"><span class="token string">`
  font-size: 14px;
  // Using headingStyle const
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>headingStyle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
`</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">H6</span> <span class="token operator">=</span> styled<span class="token punctuation">.</span>h6<span class="token template-string"><span class="token string">`
  font-size: 12px;
  // Using headingStyle const
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>headingStyle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
`</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Text <span class="token operator">=</span> styled<span class="token punctuation">.</span>p<span class="token template-string"><span class="token string">`
  font-size: 16px;
`</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Small <span class="token operator">=</span> styled<span class="token punctuation">.</span>small<span class="token template-string"><span class="token string">`
  font-size: 80%;
`</span></span><span class="token punctuation">;</span>

<span class="token comment">// Use our styles</span>
<span class="token keyword">const</span> <span class="token function-variable function">WrapperContainer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token constant">H1</span><span class="token operator">&gt;</span>Heading h1<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token constant">H1</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token constant">H2</span><span class="token operator">&gt;</span>Heading h2<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token constant">H2</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token constant">H3</span><span class="token operator">&gt;</span>Heading h3<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token constant">H3</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token constant">H4</span><span class="token operator">&gt;</span>Heading h4<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token constant">H4</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token constant">H5</span><span class="token operator">&gt;</span>Heading h5<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token constant">H5</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token constant">H6</span><span class="token operator">&gt;</span>Heading h6<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token constant">H6</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Text<span class="token operator">&gt;</span>Body text<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Small<span class="token operator">&gt;</span>Small text<span class="token operator">&lt;</span><span class="token operator">/</span>Small<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>WrapperContainer <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> container<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="extend-styled-component"><a name="extend-styled-component" class="anchor-navigation-ex-anchor" href="#extend-styled-component"><i class="fa fa-link" aria-hidden="true"></i></a><a name="extend-styled-component" class="plugin-anchor" href="#extend-styled-component"><i class="fa fa-link" aria-hidden="true"></i></a>Extend Styled Component</h4>
<pre class="language-"><code class="lang-js"><span class="token comment">// Import React.js and styled-components</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">&apos;styled-components&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&apos;.container&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Button <span class="token operator">=</span> styled<span class="token punctuation">.</span>button<span class="token template-string"><span class="token string">`
  padding: 12px 24px;
  font-size: 16px;
  color: #fff;
  border: 0;
  border-radius: 35px;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
  cursor: pointer;
`</span></span><span class="token punctuation">;</span>

<span class="token comment">// Using extend to create a red variant of the button</span>
<span class="token keyword">const</span> RedButton <span class="token operator">=</span> Button<span class="token punctuation">.</span>extend<span class="token template-string"><span class="token string">`
  background-color: #e74c3c;
`</span></span><span class="token punctuation">;</span>

<span class="token comment">// Using extend to create a green variant of the button</span>
<span class="token keyword">const</span> GreenButton <span class="token operator">=</span> Button<span class="token punctuation">.</span>extend<span class="token template-string"><span class="token string">`
  background-color: #2ecc71;
`</span></span><span class="token punctuation">;</span>

<span class="token comment">// Use our styles</span>
<span class="token keyword">const</span> <span class="token function-variable function">WrapperContainer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Button<span class="token operator">&gt;</span>Defaul button<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>RedButton<span class="token operator">&gt;</span>Red button<span class="token operator">&lt;</span><span class="token operator">/</span>RedButton<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>GreenButton<span class="token operator">&gt;</span>Green button<span class="token operator">&lt;</span><span class="token operator">/</span>GreenButton<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>WrapperContainer <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> container<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="props-for-styled-component"><a name="props-for-styled-component" class="anchor-navigation-ex-anchor" href="#props-for-styled-component"><i class="fa fa-link" aria-hidden="true"></i></a><a name="props-for-styled-component" class="plugin-anchor" href="#props-for-styled-component"><i class="fa fa-link" aria-hidden="true"></i></a>Props for Styled Component</h4>
<pre class="language-"><code class="lang-js"><span class="token comment">// Import React.js, styled-components and css</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styled<span class="token punctuation">,</span> <span class="token punctuation">{</span> css <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;styled-components&apos;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&apos;.container&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Button <span class="token operator">=</span> styled<span class="token punctuation">.</span>button<span class="token template-string"><span class="token string">`
  padding: 12px 24px;
  font-size: 16px;
  border: 0;
  border-radius: 35px;
  box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
  cursor: pointer;

  // Using props to create a gray variant of the button
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span>
    props<span class="token punctuation">.</span>gray <span class="token operator">&amp;&amp;</span>
    css<span class="token template-string"><span class="token string">`
      background-color: #95a5a6;
    `</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  // Using props to create a green variant of the button
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span>
    props<span class="token punctuation">.</span>green <span class="token operator">&amp;&amp;</span>
    css<span class="token template-string"><span class="token string">`
      background-color: #2ecc71;
    `</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  // Using props to create a red variant of the button
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span>
    props<span class="token punctuation">.</span>red <span class="token operator">&amp;&amp;</span>
    css<span class="token template-string"><span class="token string">`
      background-color: #e74c3c;
    `</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  // We can also use a ternary operator for &quot;binary&quot; changes
  color: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>gray <span class="token operator">?</span> <span class="token string">&apos;#2c3e50&apos;</span> <span class="token punctuation">:</span> <span class="token string">&apos;#fff&apos;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;
`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">WrapperContainer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Button<span class="token operator">&gt;</span>Defaul button<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token comment">/* Button with prop &quot;red&quot; */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>Button red<span class="token operator">&gt;</span>Red button<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span><span class="token comment">/* Button with prop &quot;green&quot; */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>Button green<span class="token operator">&gt;</span>Green button<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>WrapperContainer <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> container<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="interviews"><a name="interviews" class="anchor-navigation-ex-anchor" href="#interviews"><i class="fa fa-link" aria-hidden="true"></i></a>15. Interviews</h2>
<ul>
<li><a href="https://github.com/semlinker/reactjs-interview-questions" target="_blank">Reactjs Interview Questions</a></li>
</ul>
<footer class="page-footer"><span class="copyright">&#xA9; <a xmlns:cc="http://creativecommons.org/ns#" href="https://github.com/sabertazimi/awesome-notes" property="cc:attributionName" rel="cc:attributionURL" target="_blank">sabertazimi</a> &#xB7; &#x9075;&#x5FAA; <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">&#x77E5;&#x8BC6;&#x5171;&#x4EAB; &#x7F72;&#x540D;-&#x975E;&#x5546;&#x4E1A;&#x6027;&#x4F7F;&#x7528; 4.0 &#x56FD;&#x9645; &#x8BB8;&#x53EF;&#x534F;&#x8BAE;</a> all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x6700;&#x8FD1;&#x66F4;&#x65B0;&#xFF1A;
2019-05-23 09:38
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="reactRouterBasicNotes.html" class="navigation navigation-next navigation-unique" aria-label="Next page: React Router Basic Notes">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Reactjs Basic Notes","level":"1.4.7.7.1","depth":4,"next":{"title":"React Router Basic Notes","level":"1.4.7.7.2","depth":4,"path":"programming/web/reactjs/reactRouterBasicNotes.md","ref":"programming/web/reactjs/reactRouterBasicNotes.md","articles":[]},"previous":{"title":"Reactjs","level":"1.4.7.7","depth":3,"ref":"","articles":[{"title":"Reactjs Basic Notes","level":"1.4.7.7.1","depth":4,"path":"programming/web/reactjs/reactjsBasicNotes.md","ref":"programming/web/reactjs/reactjsBasicNotes.md","articles":[]},{"title":"React Router Basic Notes","level":"1.4.7.7.2","depth":4,"path":"programming/web/reactjs/reactRouterBasicNotes.md","ref":"programming/web/reactjs/reactRouterBasicNotes.md","articles":[]},{"title":"Redux Basic Notes","level":"1.4.7.7.3","depth":4,"path":"programming/web/reactjs/reduxBasicNotes.md","ref":"programming/web/reactjs/reduxBasicNotes.md","articles":[]},{"title":"Webpack Basic Notes","level":"1.4.7.7.4","depth":4,"path":"programming/web/reactjs/webpackBasicNotes.md","ref":"programming/web/reactjs/webpackBasicNotes.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["-lunr","-search","search-plus","splitter","anchors","anchor-navigation-ex","copy-code-button","expandable-chapters","theme-darkblue","theme-comscore","tbfed-pagefooter","prism","-highlight","github-buttons","edit-link","disqus","introsum"],"ignores":[".*","build","_book","gitbook","node_modules"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"&copy <a xmlns:cc=\"http://creativecommons.org/ns#\" href=\"https://github.com/sabertazimi/awesome-notes\" property=\"cc:attributionName\" rel=\"cc:attributionURL\">sabertazimi</a> Â· éµå¾ª <a rel=\"license\" href=\"http://creativecommons.org/licenses/by-nc/4.0/\">ç¥è¯å±äº« ç½²å-éåä¸æ§ä½¿ç¨ 4.0 å½é è®¸å¯åè®®</a>","modify_label":"æè¿æ´æ°ï¼","modify_format":"YYYY-MM-DD HH:mm"},"prism":{"css":["prismjs/themes/prism-tomorrow.css"]},"disqus":{"useIdentifier":false,"shortName":"gitbook-8"},"splitter":{},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-darkblue":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":false,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"theme-comscore":{},"github-buttons":{"buttons":[{"user":"sabertazimi","repo":"awesome-notes","type":"star","size":"small","count":true}]},"copy-code-button":{},"sharing":{"facebook":false,"twitter":true,"google":false,"weibo":true,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/sabertazimi/awesome-notes/edit/master"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{},"introsum":{},"expandable-chapters":{},"search-plus":{}},"theme":"default","author":"sabertazimi","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Awesome Notes","links":{"sidebar":{"Awesome Notes":"https://github.com/sabertazimi/awesome-notes"}},"gitbook":"*"},"file":{"path":"programming/web/reactjs/reactjsBasicNotes.md","mtime":"2019-05-23T01:38:47.040Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-05-23T01:40:07.704Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-disqus/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
        
    

    </body>
</html>

